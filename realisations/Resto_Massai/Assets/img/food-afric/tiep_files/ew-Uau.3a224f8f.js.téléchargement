(this.$WP=this.$WP||[]).push(["ew-Uau",(e,n)=>{"use strict";var t,i,r,s,o,a,l,u,d,p,c,m,_,g,C,O,S,I,f,k,E=e=>{var[n]=t.useContext(i),r=n.params.detailId||void 0,s=o();return t.createElement("span",{onClick:()=>{s({module:"Restaurant_Review",action:e.action,context:r}),e.onClick&&e.onClick()}},e.children)},v=e=>{var[n]=t.useContext(i),r=`${n.params.geoId||void 0}|${e.restaurantId}`,s=o();return t.createElement("span",{onClick:()=>{e.disableTracking||s({module:n.page,action:e.action,context:r}),e.onClick&&e.onClick()}},e.children)},R=()=>{if("undefined"!=typeof sessionStorage&&sessionStorage){var e=sessionStorage.getItem("eat_r_search_impression");if(null!=e){var{impressionId:n}=JSON.parse(e)||{};return n}}return null},b=e=>{if("undefined"!=typeof sessionStorage&&sessionStorage){var n=sessionStorage.getItem("sponsoredListingsLocations");if(null==n)return!1;var t=JSON.parse(n);return t&&t.hasOwnProperty(e)}return!1},N=e=>{var n=t.useContext(r),o=t.useContext(s),[a,{uid:l}]=t.useContext(i),{impression_details:u,impressionType:d}=e,p={user_agent:"undefined"==typeof navigator?"undefined":navigator.userAgent,location_id:a.params.detailId||0,last_referrer:"undefined"!=typeof document&&document.referrer||"",geo_id:a.params.geoId||0,servlet_name:a.page||"",user_id:o.userId,session_id:o.sessionId,unique_id:n.id,pageview_id:l,impression_details:null===u?null:JSON.stringify(u),impression_type:d,from_ad:b(a.params.detailId||0)||!1};return t.createElement(L,{shouldLogOnMount:e.shouldLogOnMount,impression_details:e.impression_details,impressionType:e.impressionType,onMountChildren:e.onMountChildren,onCallbackChildren:e.onCallbackChildren,attributes:p})},L=e=>{var{impressionType:n,onMountChildren:i,onCallbackChildren:r,shouldLogOnMount:s}=e;return t.createElement(I,null,(o=>{var a=!(Object.keys(o).length>0)||o.isImpressionLogged;return t.createElement(l,{query:k},(({executeMutation:o})=>{var l=()=>{e.attributes&&o({request:[e.attributes]}).then((({data:e})=>e&&((e,n)=>{var t=e&&e.EatImpressionTracking_logImpressions&&e.EatImpressionTracking_logImpressions.length>0&&e.EatImpressionTracking_logImpressions[0];if(t&&"undefined"!=typeof sessionStorage&&sessionStorage){var i={type:n,impressionId:t,timestamp:Date.now(),isImpressionLogged:!0};try{sessionStorage.setItem(n,JSON.stringify(i))}catch(e){}}})(e,n)))};return t.createElement(t.Fragment,null,t.createElement(c,{attributes:e.attributes,isParentComplete:a,shouldLogOnMount:s,logImpression:l}),void 0!==r?r(l):null,void 0!==i?i:null)}))}))};function h(e){return t.createElement(N,{shouldLogOnMount:void 0===e.shouldLogOnMount||e.shouldLogOnMount,impression_details:e.impression_details,impressionType:e.impressionType,onMountChildren:e.children})}function y(e){return t.createElement(N,{shouldLogOnMount:!1,impression_details:e.impression_details,impressionType:e.impressionType,onCallbackChildren:e.children})}var T="Restaurants_Filter",P=e=>{var n=o();return t.createElement("span",{onClick:()=>{n({module:T,action:e.action,context:e.context}),e.onClick&&e.onClick()}},e.children)},M={OPEN:"Open",CLOSE:"Close",APPLY:"Apply",DESELECT_ALL:"Deselect_all",SELECT:"Select",DESELECT:"Deselect",SEE_ALL:"See_all",CLEAR_ALL:"Clear_all"},D="RR_FROM_SPONSORED",x="RR_FROM_SPONSORED",A="R_SPONSORED_CLICK",F="R_UNSPONSORED_CLICK",U="R_SPONSORED_IMPRESSION";function q(e){return e===D||e===U||e===A}function w(e,n){if(!function(e){return(q(e)&&d("restaurants_sponsored_attribution_pixel")||!(q(e)||!d("restaurants_unsponsored_attribution_pixel")))&&(function(e){return e===F||e===A}(e)&&d("restaurants_attribution_pixel_clicks")||function(e){return"R_UNSPONSORED_IMPRESSION"===e||e===U}(e)&&d("restaurants_attribution_pixel_impressions")||function(e){return e===D||e===x}(e)&&d("restaurants_detail_page_attribution_pixel"))}(e))return!1;var t=`offlineAttributionIdFired_${n}_${e}`,i="fired";return p.get(t)!==i&&(p.set(t,i,864e5),!0)}var J=(e,n)=>({type:"RESTAURANTS_OFFLINE_ATTRIBUTION",payload:{rsAttributionlocationId:e,rsAttributionEvent:n}});function $(e){var{locationId:n,eventName:i}=e,r=J(n,i),s=u(r),o=t.useRef();return t.useEffect((()=>{o.current=s})),t.useEffect((()=>{o.current&&n&&w(i,n)&&o.current()}),[n,i]),e.children||null}var j=e=>{var{locationId:n,eventName:i}=e,r=J(n,i),s=u(r);return t.useCallback((()=>w(i,n)?s():Promise.resolve()),[s,i,n])};return e({EatImpressionOnCallback:y,EatImpressionOnMount:h,OfflineAttributionTracker:$}),[()=>{m=E,_=v,g=R,C=Object.freeze({}),O=t.createContext(C),({Provider:S,Consumer:I}=O),(f=JSON.parse('{"kind":"Document","definitions":[{"kind":"OperationDefinition","operation":"mutation","name":{"kind":"Name","value":"LogImpressions"},"variableDefinitions":[{"kind":"VariableDefinition","variable":{"kind":"Variable","name":{"kind":"Name","value":"request"}},"type":{"kind":"NonNullType","type":{"kind":"ListType","type":{"kind":"NamedType","name":{"kind":"Name","value":"EatImpressionTracking_eat_impressionInput"}}}},"directives":[]}],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"EatImpressionTracking_logImpressions"},"arguments":[{"kind":"Argument","name":{"kind":"Name","value":"request"},"value":{"kind":"Variable","name":{"kind":"Name","value":"request"}}}],"directives":[]}]}}],"loc":{"start":0,"end":150}}')).__key=43820549500400,k=f,c=class extends t.Component{componentDidMount(){var{isParentComplete:e,logImpression:n,shouldLogOnMount:t}=this.props;t&&e&&n()}componentDidUpdate(e){var{attributes:n,isParentComplete:t,logImpression:i,shouldLogOnMount:r}=this.props,{attributes:s,isParentComplete:o}=e;r&&(!a(n,s)||t&&!o)&&i()}render(){return null}},e({EatImpressionInner:L,EatImpressionOnCallback:y,EatImpressionOnMount:h,FILTERS_MODULE:T,FiltersPageActions:M,IsFromSponsoredClick:b,OfflineAttributionTracker:$,RDetailClickTracker:m,RFiltersClickTracker:P,RListClickTracker:_,RR_FROM_SPONSORED:D,RR_FROM_UNSPONSORED:x,R_SPONSORED_CLICK:A,R_UNSPONSORED_CLICK:F,RestaurantImpressionIdFromSessionStorage:g,useAttributionCallback:j})},[e=>t=e,e=>(i=e.Route,r=e.Device,s=e.Visitor),e=>o=e.useGARecorder,e=>a=e.default,e=>l=e.Mutation,e=>u=e.usePixelCallback,e=>d=e.featureIsEnabled,e=>p=e.default]]},["cDcdfi","2R4xv2","fsml46","YwNsO_","5X2em-","jb_4W2","-i3PJS","jaCyxS"]]);
