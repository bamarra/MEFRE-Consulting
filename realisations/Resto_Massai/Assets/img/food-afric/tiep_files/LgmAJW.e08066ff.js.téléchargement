(this.$WP=this.$WP||[]).push(["LgmAJW",(e,r)=>{"use strict";var t,s,a,l,n,i=!1,u=null,o=null,d=null,c=()=>{i=!0;var e=n.get(0);if(e&&e.length>0){n.set(0,[]);for(var r=[],t=0;t<e.length;++t){var s=e[t];if(s)try{s()}catch(e){r.push(e)}}if(r.length>0)throw setTimeout(c,0),r[Math.floor(Math.random()*r.length)];var a=n.get(0);if(a&&a.length>0)return void setTimeout(c,0)}i=!1;var l=n;n=new Map,l.forEach(((e,r)=>{e&&e.length>0&&setTimeout((()=>{var r=i;i=!0;for(var t=0;t<e.length;++t)h(e[t],0);r||c()}),r)})),d&&d()},h=(e,r=0)=>{if(e){var t=r<0?0:r,s=n.get(t);s||(s=[],n.set(t,s)),s.push(e),i||(i=!0,setTimeout(c,0))}},g=[1e3,1e3,1e3,1e3,1500,1500,1500,2e3,2e3,2e3,5e3,1e4,1e4,1e4,1e4],v=/&puid=[^&]+/g,U=(e,r)=>e===r||(e&&r?e.replace(v,"")===r.replace(v,""):!e&&!r),p=(e,r,t,s)=>{var n=null;return a({data:(a,l,i)=>{var u=(n=n||e(a,null))?l(n):null;return s&&"function"==typeof s&&s(a,l),s=>{var l=u&&u.get()||{data:null,loading:!1};return{completionPredicate:r,currentBaseUrl:e(a,null),stagedUrl:n,stagedLoading:l.loading,stagedData:l.data,pollingUrlGenerator:r=>e(s,r),renderer:(e,r)=>t(s,e,r,i)}}},actions:null})(l)};return[()=>{n=new Map,l=class extends t.Component{static getDerivedStateFromProps(e,r){return!e.currentBaseUrl&&r.currentBaseUrl?{override:!0,requestedUrl:null,requestedReqNum:null,currentBaseUrl:e.currentBaseUrl,currentReqNum:null,overrideDataBaseUrl:null,overrideDataReqNum:null,overrideData:null}:r.override||e.stagedUrl===e.currentBaseUrl?e.currentBaseUrl!==r.currentBaseUrl?U(e.currentBaseUrl,r.currentBaseUrl)?{currentBaseUrl:e.currentBaseUrl}:{currentBaseUrl:e.currentBaseUrl,currentReqNum:null}:null:!e.stagedLoading&&U(e.stagedUrl,e.currentBaseUrl)?{override:!0,currentBaseUrl:e.currentBaseUrl,currentReqNum:null,overrideDataBaseUrl:e.currentBaseUrl,overrideDataReqNum:null,overrideData:e.stagedData}:{override:!0,currentBaseUrl:e.currentBaseUrl,currentReqNum:null}}constructor(e){super(e),this.triggerPending=void 0,this.pollPending=void 0,this.callbackRef=void 0,this.state={currentBaseUrl:e.currentBaseUrl,currentReqNum:null,requestedUrl:null,requestedReqNum:null,override:e.stagedUrl!==e.currentBaseUrl,overrideDataBaseUrl:null,overrideDataReqNum:null,overrideData:null},this.triggerPending=!1,this.pollPending=!1,this.callbackRef=[this]}onTrigger(){this.triggerPending=!1;var e=this.state.currentBaseUrl,r=this.state.currentReqNum,t=this.callbackRef;if(this.state.requestedUrl!==e||r&&r>(this.state.requestedReqNum||0)){var a=e;if(a&&r&&r>1&&(a=this.props.pollingUrlGenerator(r)),!a)return void this.setState({override:!0,requestedUrl:e,requestedReqNum:r,overrideData:null,overrideDataBaseUrl:e,overrideDataReqNum:r});this.setState({requestedUrl:e,requestedReqNum:r}),(e=>{if(!e)return Promise.resolve(null);if(!(u&&o&&d)){d&&d(),d=null;var r=new s;u=r,o=new Promise(((e,t)=>{d=()=>{try{d=null,u=null,o=null,e(r.resolve())}catch(e){t(e)}}}))}var t=u.stager(e);return o.then((r=>{var s=r;return(s=(s=s&&s[t])&&s[e])?s.body:null}))})(a).then((s=>t[0]&&t[0].processResponse(e,r,a,s)),(s=>t[0]&&t[0].processResponse(e,r,a,null)))}}processResponse(e,r,t,s){e===this.state.requestedUrl&&r===this.state.requestedReqNum&&(this.pollPending=!1,this.setState({override:!0,overrideData:s||null,overrideDataBaseUrl:e,overrideDataReqNum:r}))}triggerPoll(e,r){U(this.state.currentBaseUrl,e)&&(r||1)>=(this.state.currentReqNum||1)&&this.setState({currentReqNum:(r||1)+1})}render(){if(!this.state.currentBaseUrl)return this.props.renderer(!1,null);var e=this.state.overrideData,r=this.state.overrideDataBaseUrl!==this.state.currentBaseUrl,t=r||(this.state.currentReqNum||0)>(this.state.overrideDataReqNum||0);r&&!this.state.override&&this.props.stagedUrl===this.state.currentBaseUrl&&(e=this.props.stagedData,r=this.props.stagedLoading,t=(this.state.currentReqNum||0)>1);var s=this.callbackRef;if(t)this.triggerPending||this.state.currentBaseUrl===this.state.requestedUrl&&this.state.currentReqNum===this.state.requestedReqNum||(this.triggerPending=!0,h((()=>s[0]&&s[0].onTrigger()),0));else if(!r&&!this.pollPending&&this.state.currentBaseUrl&&!this.props.completionPredicate(e)){var a=this.state.currentBaseUrl,l=this.state.currentReqNum||1;l<g.length&&(this.pollPending=!0,h((()=>s[0]&&s[0].triggerPoll(a,l)),g[l]))}return this.props.renderer(!e||r,e)}componentWillUnmount(){this.callbackRef[0]=null}},e("bindDataApiPoller",p)},[e=>t=e,e=>(s=e.ApiCaller,a=e.bind)]]},["cDcdfi","RiHMo-"]]);
