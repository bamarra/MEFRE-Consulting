(this.$WP=this.$WP||[]).push(["PgoAle",(e,t)=>{"use strict";var i,a,n,r,l,d,o,s,u,m,c,p,g,v,k={placetypes:["ACCOMMODATION","EATERY","ATTRACTION"]},f=({userPosition:e,targetLocation:t,distanceUnit:a})=>{if(!e||!t)return null;var{distance:n,name:r}=t;if(!((e,t)=>{if(e)switch(t){case"KILOMETERS":if(e>m)return!1;break;default:if(e>100)return!1}return!0})(n,a))return null;var l=(({countryId:e,parentGeoId:t,placeType:i})=>{var a=[];return Object.keys(s).forEach((n=>{var r=s[n];r.placetypes&&!r.placetypes.includes(i)||r.excludedParentGeos&&r.excludedParentGeos.includes(t)||(!r.includedCountryIds||e&&r.includedCountryIds.includes(e))&&a.push(r)})),a})(t);if(!l.length)return null;if(e.latitude&&e.longitude){var d={pickup:e,dropoff:t,dropoffName:r};return i.createElement(i.Fragment,null,l.map((e=>i.createElement(u,Object.assign({ride:d},e,{key:e.name})))))}return null},b=({locId:e,distanceUnit:t})=>{var n=(()=>{var e=r.withConverter((e=>e.startsWith("%1%")?decodeURIComponent(e.substring(3)):decodeURIComponent(e))).get("TAUserLocation")||"";if(e){var t=e.split("&");t[0].indexOf("v")>-1&&t.shift();var[i,a]=t,n=Number.parseFloat(i),l=Number.parseFloat(a);if(!Number.isNaN(n)&&!Number.isNaN(l))return{latitude:n,longitude:l}}return null})();return!n||!e||e<0?null:i.createElement(a,{query:g,variables:{locationId:e,userLocation:n,userUnits:t}},(({fetching:e,data:a})=>!e&&a&&a.locations&&a.locations[0]?i.createElement(c,{userPosition:n,distanceUnit:t,targetLocation:a.locations[0]}):null))};return[()=>{s={uber:{...k,name:"uber",excludedParentGeos:[154943],calloutText:()=>l("mobile_uberCTA_1ad3"),logoUrl:"/svg/mobile/uber_logo.svg",getCtaUrl:({dropoff:e,dropoffName:t})=>{var i={action:"setPickup",client_id:"-NyzH0pBoWxt0dXPII6YiBh9IEyYfTkN",pickup:"my_location","dropoff[latitude]":e.latitude.toString(10),"dropoff[longitude]":e.longitude.toString(10),"dropoff[nickname]":t};return`https://m.uber.com/ul/?${new URLSearchParams(i).toString()}`},getEstimateHandler:({pickup:e,dropoff:t})=>{if(!e)return new Promise(((e,t)=>t()));var i={start_latitude:e.latitude.toString(10),start_longitude:e.longitude.toString(10),end_latitude:t.latitude.toString(10),end_longitude:t.longitude.toString(10)},a=new URLSearchParams(i);return new Promise(((e,t)=>fetch(`/MobileUberEstimateAjax?${a.toString()}`,{credentials:"same-origin"}).then((i=>i.ok?i.json().then((i=>{i&&i.product_id||t();var a=i.price_estimate_string||"";if(i.time_estimate){var n=Math.round(parseInt(i.time_estimate,10)/60);a=a?`${a}, ${l("mobile_uber_1ad3",{0:n})}`:l("mobile_uber_1ad3",{0:n})}a?e(a):t()})):t()),t)))}},olaCabs:{...k,name:"olaCab",includedCountryIds:[293860],calloutText:()=>l("mobile_ola_cabs"),logoUrl:"/svg/mobile/ola_cabs_logo.svg",getCtaUrl:({pickup:e,dropoff:t,dropoffName:i})=>{var a={utm_source:"148b73e4b678470e9adc655d63ba3863",landing_page:"bk",lat:e?e.latitude.toFixed(6):"",lng:e?e.longitude.toFixed(6):"",drop_lat:t.latitude.toFixed(6),drop_lng:t.longitude.toFixed(6),drop_name:i};return`https://olawebcdn.com/assets/ola-universal-link.html?${new URLSearchParams(a).toString()}`},getEstimateHandler:({pickup:e,dropoff:t,dropoffName:i})=>{if(!e)return new Promise(((e,t)=>t()));var a={start_latitude:e.latitude.toFixed(6),start_longitude:e.longitude.toFixed(6),end_latitude:t.latitude.toFixed(6),end_longitude:t.longitude.toFixed(6),drop_name:i},n=new URLSearchParams(a);return new Promise(((e,t)=>fetch(`/MobileOlaCabsEstimateAjax?${n.toString()}`,{credentials:"same-origin"}).then((i=>i.ok?i.json().then((t=>e(t.estimate_string))):t()),t)))}}},(o=class extends i.Component{constructor(e){super(e),this.state={estimateRequested:!1,estimateFailed:!1,estimateCallout:null}}componentDidMount(){var{ride:e,getEstimateHandler:t}=this.props;!this.state.estimateRequested&&e.pickup&&t(e).then((e=>this.setState({estimateCallout:e,estimateFailed:!1})),(()=>this.setState({estimateCallout:null,estimateFailed:!0})))}renderCallout(){var{estimateCallout:e}=this.state,{calloutText:t}=this.props;return e||t()}render(){var{getCtaUrl:e,ride:t,logoUrl:a}=this.props;return this.state.estimateFailed?null:i.createElement("a",{className:"djEjh u",rel:"nofollow",href:e(t)},i.createElement(d,{src:a,className:"fxIzp"}),i.createElement("div",{className:"meABb Cg Fa S4"},this.renderCallout()))}}).defaultProps={pickupLocation:null},u=o,m=160.934,c=f,(p=JSON.parse('{"kind":"Document","definitions":[{"kind":"OperationDefinition","operation":"query","name":{"kind":"Name","value":"RideService"},"variableDefinitions":[{"kind":"VariableDefinition","variable":{"kind":"Variable","name":{"kind":"Name","value":"locationId"}},"type":{"kind":"NonNullType","type":{"kind":"NamedType","name":{"kind":"Name","value":"Int"}}},"directives":[]},{"kind":"VariableDefinition","variable":{"kind":"Variable","name":{"kind":"Name","value":"userLocation"}},"type":{"kind":"NamedType","name":{"kind":"Name","value":"GeoPointInput"}},"directives":[]},{"kind":"VariableDefinition","variable":{"kind":"Variable","name":{"kind":"Name","value":"userUnits"}},"type":{"kind":"NonNullType","type":{"kind":"NamedType","name":{"kind":"Name","value":"UnitLengthInput"}}},"directives":[]}],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"locations"},"arguments":[{"kind":"Argument","name":{"kind":"Name","value":"locationIds"},"value":{"kind":"ListValue","values":[{"kind":"Variable","name":{"kind":"Name","value":"locationId"}}]}}],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"name"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"latitude"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"longitude"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"countryId"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"placeType"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"parentGeoId"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"distance"},"arguments":[{"kind":"Argument","name":{"kind":"Name","value":"units"},"value":{"kind":"Variable","name":{"kind":"Name","value":"userUnits"}}},{"kind":"Argument","name":{"kind":"Name","value":"fromPoint"},"value":{"kind":"Variable","name":{"kind":"Name","value":"userLocation"}}}],"directives":[]}]}}]}}],"loc":{"start":0,"end":293}}')).__key=38758489938944,g=p,v=n((e=>({locId:e.page.detailId,distanceUnit:e.i18n.distanceUnit||"MILES"})))(b),e("default",v)},[e=>i=e,e=>a=e.Query,e=>n=e.connect,e=>r=e.default,e=>l=e.localize,e=>d=e.CdnImage]]},["cDcdfi","5X2em-","h74DsO","vmXh3M","535agn","4kVXmt"]]);
