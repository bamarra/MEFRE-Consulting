(this.$WP=this.$WP||[]).push(["MG7IEl",(e,t)=>{"use strict";var r,a,n,o,i,s,l,d,u,c,m,g,v,p,f,h,E,y,I,P,w,C,A,b,R,D,T,_,S,k,M,O,N,$,x,W,U,B,L,H,j,z,V,q,F,G,X,K,Q,J,Y,Z,ee,te,re,ae,ne,oe,ie,se,le,de,ue,ce,me,ge,ve,pe,fe,he,Ee,ye,Ie,Pe,we,Ce,Ae,be,Re,De,Te,_e,Se,ke,Me,Oe,Ne,$e,xe,We,Ue,Be,Le,He,je,ze,Ve,qe,Fe,Ge,Xe,Ke,Qe,Je=({children:e})=>e,Ye=({children:e})=>{var{browser:t,userAgentCategory:r}=n(V),{domainName:s}=n(q),[l,d]=o(null),[u,c]=o(!1),m=Te();return i((()=>{if(_e)d(_e);else{var e="MOBILE"===r?window.innerHeight:window.innerHeight/2,a=.01*window.innerHeight,n={userAgentCategory:r,fetchMargin:`${e}px`,renderMargin:`${a}px`,browserFamily:t.family,domainName:s,recordScriptLoadFailure:m};if(Ee.get(ye))_e=new Ie(n),c(!0);else if(E("rubicon_header_bidding")||E("amazon_header_bidding")){var o=[];E("amazon_header_bidding")&&o.push(new Pe(n)),E("rubicon_header_bidding")&&o.push(new we(n)),_e=new Ce(n,o)}else _e=new Ae(n);d(_e)}}),[t,r,s,m]),a.createElement(be.Provider,{value:l},a.createElement(Re,null,u&&a.createElement(De,{onDisableTestMode:()=>{Ee.remove(ye),window.location.reload()}}),a.createElement(Se,null,e)))},Ze=(e,t)=>fetch(`/UpdateSessionDatesAjax?${e}=${t}`,{credentials:"same-origin"}),et=({stayDates:e,guests:t,defaultDates:r})=>{var a=le(e),n=de(t);return a&&n&&a.checkInDate&&a.checkOutDate?{checkInDate:a.checkInDate,checkOutDate:a.checkOutDate,defaultDates:r,rooms:n.rooms,adults:n.adults,children:n.children,childAgesPerRoom:n.childAgesPerRoom}:null},tt=({preferences:e,hotels:t,restaurants:r,attractions:a,flights:n})=>({preferences:e,attractions:{singleDate:se(a.singleDate,"-"),fromDate:se(a.fromDate,"-"),toDate:se(a.toDate,"-"),adults:a.attractionPaxAdults,children:a.attractionPaxChildren},restaurants:{date:se(r.date,"-")},hotels:t?et(t):null,flights:{oneWayDate:se(n.oneWayDate,"-"),departureDate:se(n.departureDate,"-"),returnDate:se(n.returnDate,"-"),originAirportCode:n.originAirportCode,destinationAirportCode:n.destinationAirportCode,adults:1,seniors:0,childAges:[],classOfService:null}}),rt=({preferencesTravelInfo:e,attractionsTravelInfo:t,hotelsTravelInfo:a,restaurantsDate:n,flightsTravelInfo:o,setRestaurantsDate:i,setHotelsTravelInfo:s,setAttractionsTravelInfo:l,setFlightsTravelInfo:d,children:u})=>{var c=r.useMemo((()=>e&&"string"==typeof e.currency?e:{currency:"USD"}),[e]),m=r.useMemo((()=>((e,t,r,a,n)=>({preferences:{setCurrency:t=>{globalThis.require(["trjs!ta/util/Currency"],(r=>r.setCurrencyAndReload(t,e)))}},attractions:{setSingleDate:e=>{t(ie(e,"-")),Ze("attrdate",null===e?"_":ie(e))},setDates:(e,r)=>{t(void 0,ie(e,"-"),ie(r,"-")),Ze("attrrange",`${ie(e)}_${ie(r)}`)},setPassengers:(e,r)=>{t(void 0,void 0,void 0,e,r),Ze("zuf",`${e}_${r}`)}},restaurants:{setDate:e=>{e&&(r(e,w.formatDate("week_date_short",e)),Ze("eaterydate",ie(e)))},setTime:()=>{},setGuests:()=>{},clearAll:()=>{}},hotels:{setStayDates:(e,t)=>{var r=`${ie(e)}_${ie(t)}`;a(r),Ze("staydates",r)},setGuestInfo:(e,t,r)=>{var n=`${t}_${e}${r.length>0?`_${r.map((e=>e.join(","))).join(":")}`:""}`;a(void 0,n),Ze("uguests",n)},setTravelInfo:()=>{}},flights:{setOneWayDate:e=>{n(ie(e)),Ze("oneway",ie(e))},setRoundTripDates:(e,t)=>{n(void 0,ie(e),ie(t)),Ze("rtdates",`${ie(e)}_${ie(t)}`)},setOriginAirportCode:e=>{n(void 0,void 0,void 0,e),Ze("flightorig",e)},setDestinationAirportCode:e=>{n(void 0,void 0,void 0,void 0,e),Ze("flightdest",e)},setTravelerInfo:()=>{throw new Error("Not implemented: flights.setTravelerInfo is only supported in lithium")}}}))(c.currency,l,i,s,d)),[c.currency,l,i,s,d]),g=r.useMemo((()=>({...tt({preferences:c,attractions:t||{},hotels:a,restaurants:{date:n},flights:o||{}}),update:m})),[c,t,a,n,o,m]);return r.createElement(F.Provider,{value:g},u)},at=()=>{var{userId:e}=r.useContext(G),[t]=r.useContext(X),a=r.useContext(K),n=t.params.geoId||-1;return r.useCallback((r=>e&&!r.forceLogin?Promise.resolve({userId:e,hasCreatedMember:null}):new Promise((e=>{if(ce()&&"undefined"!=typeof window&&(window.location=`/RegistrationController?flow=${encodeURIComponent(r.flow||"CORE_COMBINED")}&pid=${encodeURIComponent(String(r.pid||-1))}&returnTo=${encodeURIComponent(t.path)}&fullscreen=true`),ue.isNativeWebview())ue.showRegistration(!1);else{var o={flow:r.flow||"CORE_COMBINED",pid:r.pid||-1,userRequestedForce:!0,extraQueryParams:{flowOrigin:r.flowOrigin||"join",...r.extraQueryParams},displayOnShowOverlay:r.deferShowOverlay||!1,locationId:n,requireSecure:r.requireSecure||!1,onSuccess:t=>{var n={userId:null!=t&&t.user_id?`${t.user_id}`:null,hasCreatedMember:!(null==t||!t.hasCreatedMember),loginProvider:null==t?void 0:t.loginProvider};r.onSuccess&&r.onSuccess(n),a({userId:n.userId}),e(n)},onClose:r.onClose,closeX:!1!==r.closeX,closeOnDocClick:!1!==r.closeOnDocClick,windowShadeOption:r.windowShadeOption||"light"};globalThis.require(["trjs!ta/registration/RegOverlay"],(e=>{r.onLogin&&r.onLogin(),e.showRegOverlayByPageModel(null,null,window.require("page-model"),o)}))}}))),[e,n,a,t.path])},nt=e=>{var t=Oe(),{login:a}=me(),n=E("apr_lithium_control")?a:t;return r.createElement(ge.Provider,{value:n},e.children)},ot=()=>{var[e,{navigate:t}]=n(X);i((()=>{var r=r=>{var a=r.state;null!=a&&a.params&&(e.path!==a.path||e.page!==a.page||!ve(e.params,a.params)||e.fragment!==a.fragment)&&t(a,"POP")};return window.addEventListener("popstate",r,!1),()=>{window.removeEventListener("popstate",r,!1)}}),[e,t])},it=(e,t)=>e.page===(null==t?void 0:t.page)&&ve(e.params,null==t?void 0:t.params),st=(e,t)=>{try{switch(t){case"FRAGMENT_PUSH":case"PARAM_UPDATE":history.pushState(e,"",e.path);break;case"PAGE_VIEW":history.pushState(e,"",e.path),window.scroll(0,0);break;case"IN_PLACE":history.replaceState(e,"",e.path);break;case"INITIAL":case"POP":break;default:return}}catch(e){console.error("Caught exception while accessing History API:",e)}},lt=(e,t)=>`${-1===e.indexOf("#")?e:e.split("#")[0]}${""!==(t||"")?`#${t||""}`:""}`,dt=({children:e})=>($e(),e),ut=({children:e,lithiumRouteContext:t,legacyRoute:r,lithiumNavigateAction:n,legacyNavigateAction:s})=>{var[u,c]=t,[m]=o(u),g=pe();i((()=>{var e,{path:t}=m;window.location.pathname+window.location.search===t&&void 0===(null==(e=history.state)?void 0:e.params)&&history.replaceState(m,"",m.path)}),[g,m]);var v=l(((e,t="FRAGMENT_PUSH")=>{var r=e||"";if(r!==u.fragment){var a={...u,path:lt(u.path,r),fragment:r};n(a),st(a,t)}}),[n,u]),p=l(((e,t="PAGE_VIEW")=>{if(!it(a=u,o=e)||a.fragment!==o.fragment||a.path!==o.path){var a,o,i,l,d,{page:c,params:m,fragment:v}=e,p=t,f=it(u,e),h=u.fragment!==v,E=D(u.page,e.page);!f||"PAGE_VIEW"!==t&&"PARAM_UPDATE"!==t||(p=h?"FRAGMENT_PUSH":"IN_PLACE"),(!E||"PAGE_VIEW"!==p&&"PARAM_UPDATE"!==p?"POP"!==p?Promise.resolve((l=v,d=lt((i=e).path,l),{...i,path:d})):Promise.resolve(e):fe(g,e,"PARAM_UPDATE"===p)).then((e=>{var t=it(u,e)?r:{...m,page:c};T(r,t)?(st(e,p),s(t,e.path),n(e)):window.location=e.path}))}}),[g,s,n,r,u]),f=d((()=>[{...he(u)},{...c,navigate:p,navigateToFragment:v}]),[u,p,v,c]);return a.createElement(X.Provider,{value:f},a.createElement(dt,null,e))},ct=({children:e,deviceId:t,isWebview:a,viewportCategory:n,userAgentCategory:o,os:i,browser:s,securityToken:l,userId:d,initialAbsoluteUrl:u,locale:c,isRtl:m,language:g,cdnPrefix:v,drsInfo:p,version:f,domainName:h,servlet:E,sessionId:y})=>{var I=r.useMemo((()=>({locale:{code:c,isRtl:m,language:g},cdnPrefix:v,domainName:h,version:f})),[c,m,v,g,h,f]),[P,w]=r.useState({userId:d,sessionId:y});r.useEffect((()=>{w({userId:d,sessionId:y})}),[d,y]);var A=r.useMemo((()=>({id:t,isWebview:a,viewportCategory:n,userAgentCategory:o,jsEngine:{family:"UNKNOWN",majorVersion:-1},renderEngine:{family:"UNKNOWN",majorVersion:-1},os:i,browser:s,securityToken:l})),[n,t,o,i,s,a,l]),b=r.useMemo((()=>({drsInfo:p,ssrLogs:[],renderError:null,stagingError:null,debugTool:!1,serviceCalls:[],serviceWorker:!1})),[p]),R=r.useMemo((()=>({servlet:E,fullPageUrl:u})),[E,u]),D={getMessage:C,loadMessages:()=>{throw new Error("loadMessages is not supported in LithiumBridge")}};return r.createElement(q.Provider,{value:I},r.createElement(Q.Provider,{value:b},r.createElement(G.Provider,{value:P},r.createElement(K.Provider,{value:w},r.createElement(V.Provider,{value:A},r.createElement(Me,null,r.createElement(xe,null,r.createElement(ne.Provider,{value:D},r.createElement(re,null,r.createElement(te,null,r.createElement(Ne,null,r.createElement(oe,null,r.createElement(ae,{config:R,suppressConfigWarnings:!0},r.createElement(ke,null,e))))))))))))))},mt=({store:e,urqlClient:t,children:a})=>r.createElement(v,{store:e},r.createElement(I,{client:t},r.createElement(We,null,r.createElement(Y,null,r.createElement(_,null,r.createElement(te,null,a)))))),gt=(e,t,r,a)=>!E("sentryio_js")||Be?Promise.resolve():B(e,t,r,a).then((e=>{Be=e,define("@ta/sentryBridge",[],(()=>e))})),vt={},pt={},ft={},ht=e=>(A(e.messages),y(e.features),Promise.all([...e.css.map((e=>(e in ft||(ft[e]=W(Le.redux.meta.imageCdnUrl+e)),ft[e]))),...e.js.map((e=>(e in ft||(ft[e]=U(Le.redux.meta.imageCdnUrl+e)),ft[e])))]).then((()=>$WP.getChunkPromise(e.chunkId)))),Et={},yt=e=>(e in vt||(vt[e]=fetch(`/data/1.0/bundle/dependencies/bundle?name=${encodeURIComponent(e)}`,{credentials:"same-origin",headers:{"x-ta-version":Fe}}).then((e=>e.json())).then((t=>(Et[e]=t.chunkId,t))).then(ht)),vt[e]),It=e=>(e in pt||(pt[e]=fetch(`/data/1.0/bundle/dependencies/chunk?id=${encodeURIComponent(e)}`,{credentials:"same-origin",headers:{"x-ta-version":Fe}}).then((e=>e.json())).then(ht)),pt[e]),Pt=(e,t)=>a.createElement(h,{store:He},a.createElement(Ue,{store:He,urqlClient:Ge},e)),wt=()=>{var[e,{uid:t}]=a.useContext(X);return J(e,t),j(),z(),null},Ct="data-component-init",At=(e,t,r={})=>{var n=document.getElementById(e);if(null!==n){if(!n.getAttribute(Ct)){n.setAttribute(Ct,Ct);var o=e=>{new p(He,e,r).reload(),u(Pt(a.createElement(e,r)),n)};if("string"==typeof t){var i=Et[t];$WP.getChunkPromise(i).then((e=>o(e.default)))}else o(t)}}else console.error(`Unable to find DOM element with id = ${e}`)},bt=e=>{var t=document.getElementById(e);null!==t&&(m(t),t.removeAttribute(Ct))},Rt=(e,t,r={})=>{var n=document.getElementById(e);if(null!==n){if(!n.getAttribute(Ct)){n.setAttribute(Ct,Ct);var o=e=>{new p(He,e,r).stage(r),c(Pt(a.createElement(e,r)),n)};if("string"==typeof t){var i=Et[t];$WP.getChunkPromise(i).then((e=>o(e.default)))}else o(t)}}else console.error(`Unable to find DOM element with id = ${e}`)},Dt=(e,t)=>{var r=a.createElement(Ue,{store:He,urqlClient:Ge},e);return t&&(r=a.createElement(h,{store:He},r)),r};return[()=>{Se=s(Je),ke=Ye,Me=g((e=>({preferencesTravelInfo:e.travelerInfo.preferences,attractionsTravelInfo:e.travelerInfo.attractions,restaurantsDate:e.travelerInfo.restaurants&&e.travelerInfo.restaurants.date,hotelsTravelInfo:e.travelerInfo.hotels,flightsTravelInfo:e.travelerInfo.flights})),(e=>({setCurrency:t=>e(k.travelerInfo.setCurrency(t)),setRestaurantsDate:(t,r)=>e(k.travelerInfo.setEatTravelerDate(t,r)),setHotelsTravelInfo:(t,r)=>e(k.travelerInfo.setHotelsTravelerInfo(t,r,!1)),setAttractionsTravelInfo:(t,r,a,n,o)=>e({type:"SET_ATTRACTIONS_TRAVELER_INFO",travelerInfo:{singleDate:t,fromDate:r,toDate:a,attractionPaxAdults:n,attractionPaxChildren:o}}),setFlightsTravelInfo:(t,r,a,n,o)=>e(k.travelerInfo.setFlightsTravelerInfo(t,r,a,n,o))})))(rt),Oe=at,Ne=nt,$e=ot,xe=g(((e,t)=>({...t,lithiumRouteContext:e.lithiumRoute,legacyRoute:e.route})),{lithiumNavigateAction:k.lithiumRoute.navigate,legacyNavigateAction:k.route.navigate})(ut),We=g(((e,t)=>({...t,deviceId:e.tracking.uniqueId,isWebview:e.meta.isNativeWebview,viewportCategory:e.meta.device.viewportCategory,userAgentCategory:e.meta.device.userAgentCategory,os:e.meta.device.os,browser:e.meta.device.browser,securityToken:e.meta.device.securityToken,userId:e.auth.loggedInUserId,initialAbsoluteUrl:e.meta.initialAbsoluteUrl,locale:e.i18n.ietfLocale,isRtl:e.i18n.isRtl,language:e.i18n.language,cdnPrefix:e.meta.imageCdnUrl,drsInfo:e.tracking.drsInfo,version:e.webVersion||`${e.tracking.vcsBranch}|${e.tracking.vcsRevision}`,domainName:e.meta.baseUrl.split("://")[1],servlet:e.meta.initialServletName,sessionId:e.tracking.sessionId})))(ct),Ue=mt,({pageManifest:Le}=__WEB_CONTEXT__),b("Components Initialization"),b("Components Bundle Load"),Le.bundles.forEach((e=>{pt[e]=$WP.getChunkPromise(e)})),Promise.all(Object.values(pt)).then((()=>{R("Components Bundle Load")})),Le.assets.forEach((e=>{ft[e]=Promise.resolve(!0)})),A(Le.messages),y(Le.features),He=M(Le.redux),({csrfToken:je}=He.getState().auth),({vcsRevision:ze,vcsBranch:Ve,uid:qe}=He.getState().tracking),Fe=He.getState().webVersion||`${Ve||""}|${ze||""}`,Ge=P({securityToken:je,ssrData:Le.urqlCache,initialPvid:qe}),$WP.installResolver(It),Xe=a.createElement(h,{store:He},a.createElement(v,{store:He},a.createElement(_,null,a.createElement(Z,null),a.createElement(S,null),a.createElement(wt,null),a.createElement(H,null),a.createElement(L,{installer:gt,fallbackPageName:Le.redux.route.page,project:"tripadvisor-web-app"}),a.createElement(f,null),a.createElement(ee,{isRubiconEnabled:E("rubicon_header_bidding")})))),b("Loadables"),Ke=Promise.all(Le.lazyLoadedModules.filter((e=>!!e)).map((e=>$WP.getChunkEmptyPromise(e)))).finally((()=>{R("Loadables");var{body:e}=document,t=document.createElement("div");t.id="singletonRoot",e&&(e.appendChild(t),u(Pt(Xe),t)),b("Hydration"),He.dispatch(O());var r=[];return Le.hydrations.forEach((e=>{var t=document.getElementById(e.id);null===t||t.getAttribute(Ct)||(t.setAttribute(Ct,Ct),r.push((()=>new Promise((r=>{$WP.getChunkPromise(e.package).then((n=>{e.package,e.id,new p(He,n.default,e.props).stage(e.props),c(Pt(a.createElement(n.default,e.props)),t,(()=>{r()}))}))})))))})),Promise.all(r.map((e=>{var t=e();return t?t.then(null,(()=>null)):t})))})).finally((()=>{R("Hydration"),He.dispatch(N()),$(),b("Render");var e=[];Le.renders.forEach((t=>{var r=document.getElementById(t.id);null===r||r.getAttribute(Ct)||(r.setAttribute(Ct,Ct),e.push(new Promise((e=>{$WP.getChunkPromise(t.package).then((n=>{new p(He,n.default,t.props).reload(),t.package,t.id,u(Pt(a.createElement(n.default,t.props)),r,(()=>{e()}))}))}))))})),Promise.all(e).finally((()=>{if(R("Render"),R("Components Initialization"),E("prod_runtime_tracking")&&"undefined"!=typeof window&&window.performance&&window.performance.getEntriesByName){var e=window.performance.getEntriesByName("components-Components Initialization-end","mark");if(e&&e.length>0){var t=e[0].startTime;null!==t&&x({module:"runtime",action:"initialization_complete",context:Number(t).toString()})}}}))})),Qe=Le.hydrations.concat(Le.renders).reduce(((e,t)=>(e[t.id]=t.props,e)),{}),define("@ta/platform.runtime",[],(()=>({pageManifestComponents:Qe,wrapSubrootElement:Dt,hydrateRoot:Rt,destroyRoot:bt,createRoot:At,default:Ke,importBundle:yt}))),e({createRoot:At,default:Ke,destroyRoot:bt,hydrateRoot:Rt,importBundle:yt,pageManifestComponents:Qe,wrapSubrootElement:Dt})},[e=>(r=e,a=e.default,n=e.useContext,o=e.useState,i=e.useEffect,s=e.memo,l=e.useCallback,d=e.useMemo),e=>(u=e.render,c=e.hydrate,m=e.unmountComponentAtNode),e=>(g=e.connect,v=e.Provider),e=>p=e.ApiMonitor,e=>f=e.ConsentProvider,e=>h=e.ErrorBoundary,e=>(E=e.featureIsEnabled,y=e.loadFeatures),e=>(I=e.default,P=e.buildUrqlClient),e=>(w=e.globalize,C=e.getMessage,A=e.loadMessages),e=>(b=e.start,R=e.end),e=>(D=e.canNavigateBetweenPages,T=e.canNavigate,_=e.Router,S=e.History),e=>(k=e.actions,M=e.initializeStore,O=e.pauseRequestAction,N=e.resumeRequestAction,$=e.storeResizeHandler),e=>x=e.default,e=>(W=e.importCss,U=e.importScript),e=>(B=e.installSentry,L=e.Sentry),e=>H=e.WebMonitoring,e=>(j=e.useSubmitInteractionBufferEffect,z=e.useSubmitInteractionV3BufferEffect),e=>(V=e.Device,q=e.Environment,F=e.TravelInfo,G=e.Visitor,X=e.Route,K=e.Authenticate,Q=e.Debug),e=>J=e.usePageViewLogging,e=>(Y=e.PopupHierarchyProvider,Z=e.PopupHierarchyRootRenderer),e=>ee=e.default,e=>te=e.VirtualDOMPortalProvider,e=>{},e=>re=e.KeyboardNavigationModeProvider,e=>ae=e.MonikerConfiguration,e=>ne=e.Messages,e=>oe=e.ToastProvider,e=>(ie=e.serializeDate,se=e.parseDate,le=e.parseStayDates,de=e.parseGuestInfo),e=>ue=e.NativeBridge,e=>ce=e.default,e=>me=e.default,e=>ge=e.Login,e=>ve=e.default,e=>pe=e.useClient,e=>(fe=e.tryToCanonicalizeRoute,he=e.getBackwardsCompatRoute),e=>Ee=e.default,e=>(ye=e.AD_TEST_MODE_STORAGE_KEY,Ie=e.TestAdServer,Pe=e.AmazonAdServer,we=e.RubiconAdServer,Ce=e.PreBiddingGptAdServer,Ae=e.GptAdServer,be=e.AdServer,Re=e.PageTargetingProvider,De=e.TestModeIndicator),e=>Te=e.useLogAdScriptLoadFailure]]},["cDcdfi","faye7n","h74DsO","RiHMo-","lMO0v3","nIW_Rw","-i3PJS","OnmvvE","535agn","B7vHz6","N4pTU2","aunxON","Jk5sjx","pLbCP4","UhC_bI","2kkWwV","fsml46","2R4xv2","xZoNdB","FAXpyL","yP3WOz","vq6MSq","RH7wJe","W3_c4H","jb_4W2","0DsHEV","Q7TAd7","oo669z","Ov85iR","SfdMbo","VANuRt","mv7yXI","YwNsO_","5X2em-","F8raOV","jaCyxS","nCvudh","wzAQTx"]]);
