(this.$WP=this.$WP||[]).push(["fsml46",(e,t)=>{"use strict";var n,a,i,r,o,s,l,u,c,d,m="interaction_mutation_buffer",v=(e,t)=>e({request:{clientRequestTimestampMs:Date.now(),request:t}}),g=!1,p=e=>{var t=(()=>{try{return JSON.parse(localStorage.getItem(m)||"[]")}catch(e){}return[]})();t.length>0&&!g?(g=!0,v(e,t).then((()=>{(e=>{try{var t=JSON.parse(localStorage.getItem(m)||"[]");localStorage.setItem(m,JSON.stringify(t.filter((t=>e.every((e=>!a(t,e)))))))}catch(e){}})(t)})).finally((()=>{g=!1}))):t.length>0&&g&&setTimeout((()=>p(e)),3e3)},k=(e,t,n,a)=>{var i={pageUid:t,eventTimestampMs:Date.now(),...e},r=[];return n&&r.push({key:"user_id",value:n}),a&&r.push({key:"session_id",value:a}),0!==r.length&&(i={opaqueIds:r,...i}),i},I=()=>{var e=s(u),[,{uid:t}]=n.useContext(i),{userId:a,sessionId:o}=n.useContext(r);return n.useCallback((n=>{((e,t,n,a)=>{(e=>{try{var t=JSON.parse(localStorage.getItem(m)||"[]");t.push(e),localStorage.setItem(m,JSON.stringify(t))}catch(e){}})(k(e,t,n,a))})(n,t,a,o),setTimeout((()=>p(e)),3e3)}),[e,o,t,a])},S=()=>{var e=s(u),[,{uid:t}]=n.useContext(i),{userId:a,sessionId:o}=n.useContext(r);return n.useCallback((n=>{var i=k(n,t,a,o);return new Promise(((t,n)=>{v(e,[i]).then((e=>{var a,i,r;return!e.error&&null!=(a=e.data)&&null!=(i=a.Impressions_postInteractionsV2)&&null!=(r=i.response)&&r[0]?t():n()}),(()=>n()))}))}),[e,o,t,a])},f=()=>{var e=s(u);n.useEffect((()=>{requestIdleCallback((()=>{p(e)}))}),[e])},h="interactionV3_mutation_buffer",N=(e,t)=>e({request:{clientRequestTimestampMs:Date.now(),request:t}}),y=!1,b=e=>{var t=(()=>{try{return JSON.parse(localStorage.getItem(h)||"[]")}catch(e){}return[]})();t.length>0&&!y?(y=!0,N(e,t).then((()=>{(e=>{try{var t=JSON.parse(localStorage.getItem(h)||"[]");localStorage.setItem(h,JSON.stringify(t.filter((t=>e.every((e=>!a(t,e)))))))}catch(e){}})(t)})).finally((()=>{y=!1}))):t.length>0&&y&&setTimeout((()=>b(e)),3e3)},O=()=>{var[,e]=l(c),[,{uid:t}]=n.useContext(i),{userId:a,sessionId:s}=n.useContext(r),{userAgentCategory:u}=n.useContext(o);return n.useCallback((n=>{(e=>{try{var t=JSON.parse(localStorage.getItem(h)||"[]");t.push(e),localStorage.setItem(h,JSON.stringify(t))}catch(e){}})({pageUid:t,userId:a,sessionId:s,userAgent:u,eventTimestampMs:Date.now(),team:"Other",...n}),setTimeout((()=>b(e)),3e3)}),[e,t,a,s,u])},C=()=>{var[,e]=l(c),[,{uid:t}]=n.useContext(i),{userId:a,sessionId:s}=n.useContext(r),{userAgentCategory:u}=n.useContext(o);return n.useCallback((n=>{var i={pageUid:t,userId:a,sessionId:s,userAgent:u,eventTimestampMs:Date.now(),team:"Other",...n};return new Promise(((t,n)=>{N(e,[i]).then((e=>{var a,i,r;return!e.error&&null!=(a=e.data)&&null!=(i=a.Impressions_postInteractionsV3)&&null!=(r=i.response)&&r[0]?t():n()}),(()=>n()))}))}),[e,s,t,u,a])},V=()=>{var[,e]=l(c);n.useEffect((()=>{requestIdleCallback((()=>{b(e)}))}),[e])},q="interaction_buffer",_=e=>{if(0===e.length)return Promise.resolve();var t=new URLSearchParams("?batched=true");return e.forEach(((e,n)=>{e.forEach(((e,a)=>{void 0!==e&&t.append(`data[${n}][${a}]`,e)}))})),fetch("/GARecord",{method:"POST",body:t.toString(),credentials:"same-origin",headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8","X-Requested-With":"XMLHttpRequest"}}).catch((e=>{console.error(e)}))},w=e=>{var t=new URLSearchParams;return Object.entries(e).forEach((([e,n])=>{"eventId"!==e&&t.append(e,n)})),t},x=!1,T=()=>{if(x)J();else{x=!0;try{var e=localStorage.getItem(q),t=e?JSON.parse(e):[];_(t.map(w)).then((()=>{var e=localStorage.getItem(q),n=e?JSON.parse(e):[];localStorage.setItem(q,JSON.stringify(n.filter((e=>t.every((t=>!a(t,e)))))))})).finally((()=>{x=!1}))}catch(e){x=!1}}},D=null,J=()=>{null!==D&&clearTimeout(D),D=setTimeout(T,1e3)},R=e=>{try{var t=localStorage.getItem(q),n=t?JSON.parse(t):[];n.push(e),localStorage.setItem(q,JSON.stringify(n))}catch(e){return!1}return J(),!0},A=e=>{var t={eventId:Math.random().toString()};e.forEach(((e,n)=>{t[n]=e})),R(t)||_([e])},L=e=>{try{var t;return(null==(t=e.match(/^\/([a-zA-Z0-9_]+)/))?void 0:t[1])||"Home"}catch(e){return"Unknown"}},M=()=>{var[{page:e,params:t},{uid:a}]=n.useContext(i),{userId:o}=n.useContext(r),s=(null==t?void 0:t.detailId)||void 0,l=(null==t?void 0:t.geoId)||void 0;return n.useCallback((t=>{var n,i="Unknown"===e?(e=>{try{var t,n;return(null==(t=e.match(/-d([0-9]+)/))?void 0:t[1])||(null==(n=e.match(/-g([0-9]+)/))?void 0:n[1])||void 0}catch(e){return}})(window.location.pathname):s||l||void 0,r={gac:t.module,gaa:t.action,gal:t.context,gav:t.value,gani:t.nonInteraction,gasl:null!=(n=t.location)?n:i,gass:"Unknown"===e?L(window.location.pathname):e,gapu:a,gams:null!==o,eventId:Math.random().toString()};R(r)||_([w(r)])}),[e,s,l,a,o])},U=e=>{var t=M(),{module:a,action:i,context:r,value:o,location:s,nonInteraction:l}=e||{};return n.useCallback((()=>{a&&i&&t({module:a,action:i,context:r,value:o,location:s,nonInteraction:l})}),[t,a,i,r,o,s,l])};return[()=>{(u=JSON.parse('{"kind":"Document","definitions":[{"kind":"OperationDefinition","operation":"mutation","name":{"kind":"Name","value":"LogInteractions"},"variableDefinitions":[{"kind":"VariableDefinition","variable":{"kind":"Variable","name":{"kind":"Name","value":"request"}},"type":{"kind":"NonNullType","type":{"kind":"NamedType","name":{"kind":"Name","value":"Impressions_InteractionsRequestInput"}}},"directives":[]}],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"Impressions_postInteractionsV2"},"arguments":[{"kind":"Argument","name":{"kind":"Name","value":"request"},"value":{"kind":"Variable","name":{"kind":"Name","value":"request"}}}],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"response"},"arguments":[],"directives":[]}]}}]}}],"loc":{"start":0,"end":157}}')).__key=0xe635e385a1b2,(c=JSON.parse('{"kind":"Document","definitions":[{"kind":"OperationDefinition","operation":"mutation","name":{"kind":"Name","value":"LogInteractionsV3"},"variableDefinitions":[{"kind":"VariableDefinition","variable":{"kind":"Variable","name":{"kind":"Name","value":"request"}},"type":{"kind":"NonNullType","type":{"kind":"NamedType","name":{"kind":"Name","value":"Impressions_UserInteractionsRequestInput"}}},"directives":[]}],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"Impressions_postInteractionsV3"},"arguments":[{"kind":"Argument","name":{"kind":"Name","value":"request"},"value":{"kind":"Variable","name":{"kind":"Name","value":"request"}}}],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"response"},"arguments":[],"directives":[]}]}}]}}],"loc":{"start":0,"end":163}}')).__key=0xa49a813b509f,(d=JSON.parse('{"kind":"Document","definitions":[{"kind":"OperationDefinition","operation":"mutation","name":{"kind":"Name","value":"LogInteractionV4"},"variableDefinitions":[{"kind":"VariableDefinition","variable":{"kind":"Variable","name":{"kind":"Name","value":"interaction"}},"type":{"kind":"NonNullType","type":{"kind":"NamedType","name":{"kind":"Name","value":"InteractionV4Input"}}},"directives":[]}],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"logInteractionV4"},"arguments":[{"kind":"Argument","name":{"kind":"Name","value":"interaction"},"value":{"kind":"Variable","name":{"kind":"Name","value":"interaction"}}}],"directives":[]}]}}],"loc":{"start":0,"end":119}}')).__key=0x790de86432c2,"undefined"!=typeof requestIdleCallback&&requestIdleCallback(J),e({LogInteractionV4:d,enqueue:A,useBlockingInteractionLogger:S,useBlockingInteractionV3Logger:C,useGARecordCallback:U,useGARecorder:M,useInteractionLogger:I,useInteractionV3Logger:O,useSubmitInteractionBufferEffect:f,useSubmitInteractionV3BufferEffect:V})},[e=>n=e,e=>a=e.default,e=>(i=e.Route,r=e.Visitor,o=e.Device),e=>s=e.useStatelessMutation,e=>l=e.useMutation]]},["cDcdfi","YwNsO_","2R4xv2","OnmvvE","5X2em-"]]);
