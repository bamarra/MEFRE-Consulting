(this.$WP=this.$WP||[]).push(["MlvYp6",(e,r)=>{"use strict";var t,a,o,i,n,l,d,s,c,u,p,m,v,I,f,g=({loggedInUserId:e,args:{title:r,scrollToReference:a},onClose:o,loading:i,data:n,error:d,isIOSSafari:s})=>{var p=n&&n.tripsGetOne,v=p&&m(p,e),f=t.useCallback((()=>{window.location.reload(!0)}),[]);t.useEffect((()=>{v&&f()}),[v,f]),t.useEffect((()=>{i||p||!d||(console.error("A service error occurred in the TripModal query",d),f())}),[i,p,d,f]);var[g,E]=t.useState(!1);return t.createElement(u,{title:!g&&r,onClose:o},t.createElement(l,{onError:f,errorRenderer:()=>t.createElement(c,null)},!p||i||v?t.createElement(c,null):t.createElement(I,{trip:p,scrollToReference:a,onMobileMapMaximized:s?E:void 0})))},E=e=>{var r=e.args.id,a=({variables:{tripId:e}})=>e===r?"invalidateAndRefetch":"validate",[o]=v({query:p,variables:{tripId:r,socialReference:s("social_at_referencing_profile_links")}},{addItemToTrip:a,tripsRemoveItem:a,tripsRemoveReference:a,updateTrip:a,organizeTrip:a,addTripItemComment:a,updateTripComment:a,tripsCommentsRemoveOne:a});return t.createElement(g,Object.assign({},e,{loading:o.fetching,data:o.data,error:o.error}))},T=()=>{var{route:{tripModal:e,isBoosted:r,...n},navigate:l}=t.useContext(a),d=t.useCallback((()=>{var e,r;null!=(null==(e=window)||null==(r=e.history)?void 0:r.state)?(document.dispatchEvent(new CustomEvent("modalClosingEvent")),window.history.back()):l(n)}),[l,n]);return e&&"object"==typeof e&&e.id?t.createElement(o.Provider,{value:{isBoosted:r,itemType:"TRIP",itemId:`${e.id}`}},t.createElement(i.Provider,{value:{tripId:e.id}},t.createElement(f,{args:e,onClose:d}))):null};return[()=>{I=d.component.onUsage((()=>r("MlvYp6/X2gdwD")),"TripModalContent",t.createElement(c,null)),f=n((e=>({loggedInUserId:e.auth.loggedInUserId,isIOSSafari:"SAFARI"===e.meta.device.browser.family&&"IOS"===e.meta.device.os.family})))(E),e("default",T)},[e=>t=e,e=>a=e.RouteContext,e=>o=e.default,e=>i=e.SponsorshipTrackingContext,e=>n=e.connect,e=>l=e.ErrorBoundary,e=>d=e,e=>s=e.featureIsEnabled,e=>(c=e.TripDetailSkeletonLoader,u=e.TripModalViewLayout),e=>p=e.GetFullTrip,e=>m=e.isTripUser,e=>v=e.useInvalidatableQuery]]},["cDcdfi","N4pTU2","6KWcSB","U-DhDC","h74DsO","nIW_Rw","pLbCP4","-i3PJS","6hAP4j","RXx5aI","eFKnUp","OnmvvE"]]);
