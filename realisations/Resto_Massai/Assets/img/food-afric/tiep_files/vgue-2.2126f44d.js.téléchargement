(this.$WP=this.$WP||[]).push(["vgue-2",(e,r)=>{"use strict";var t,i,o,l,a,s,c,n,f,m,p,u,d,v,g,k,O,h,C="cHNIQ A w M",E=(e,r)=>{e.persist();var{require:t}=window;t&&t(["trjs!commerce/offerclick"],(t=>{t.clickEvent(e.nativeEvent,e.currentTarget,r)}))},I=e=>{var r=p(e.offers),g=u(e.offers),k=!!(g&&r&&.97*g.price>r.price),O=c(),h=o(e.trackingProps),{userId:E}=i(d),[{page:I}]=i(v),P=l(),_=!!E,{listingKey:w,locationId:b}=e;if(r){var y=O.formatCurrencyInteger(r.price),H=t=>{h(),e.preOfferClick&&e.preOfferClick(r),e.onOfferClick(t,r.offerClickToken),(e=>{e.stopPropagation()})(t)},T=!e.suppressCommerce,S=!T||null!=r&&r.isOptimusOffer?r=>((e,r,t)=>{h(),window.open(r,"_blank"),e.stopPropagation()})(r,e.hotelReviewUrl):H,N=S;r.isOptimusOffer&&(N=e=>{((e,r,t)=>{e.persist(),r?globalThis.require(["trjs!commerce/offerclick"],(e=>{var i=e.expandToken(r);t(i.ik)})):t(null)})(e,r.offerClickToken,(t=>{P({Hotels:{ViewDealClick:{action:"HR",isMemberSignedIn:_,funnelKey:t,servletName:I,savingsAmount:r.savingsPrice,locationId:b,listingKey:w}}}),S(e)}))});var R=r.isOptimusOffer?t.createElement(n,{offer:r}):t.createElement(f,{commerceSupport:T,bestOffer:r,worstOfferPrice:g?g.price:void 0,showWorstOffer:k,priceSize:e.priceSize,premiumPrice:y,onOfferClick:H}),z=t.createElement(m,{offer:r,disableTooltip:e.disableOptimusPerkTooltip,hotelReviewUrl:e.hotelReviewUrl});return t.createElement("div",{className:C},t.createElement("div",{className:"fFOoN F1 q o W"},R),t.createElement("div",{className:"cwzOI"},t.createElement(a,{onClick:N,legacyStyled:!0,variant:"commerce",size:"small"},t.createElement(s,{id:"view_deal_button_cta"})," ")),t.createElement("div",{className:"fAYsQ"},r&&r.isOptimusOffer&&z))}var D=e.offers&&0===e.offers.length?t.createElement(s,{id:"meta_ui_contact_hotel_c2b"}):t.createElement(s,{id:"no_availailability_from_partners"});return t.createElement("div",{className:C},t.createElement("span",{className:"dIabA S2 H1 Ci"},D))},P=e=>{var[r,i]=t.useState(1),[o]=t.useContext(v),l=()=>{i(r+1)},a=i=>{var o,{loading:a,data:s}=i;return o=s&&(s.complete||p(s.offers||[]))?t.createElement(h,{locationId:e.locationId,offers:s.offers||[],trackingProps:e.trackingProps,hotelReviewUrl:e.hotelReviewUrl,suppressCommerce:e.suppressCommerce,listingKey:e.listingKey}):t.createElement("div",{style:{width:"100%"}},t.createElement(k,{size:"small"})),t.createElement(t.Fragment,null,t.createElement(g,{loading:a,complete:!!s&&s.complete,requestNumber:r,poll:l}),o)},{locationId:s}=e,c=0===o.page.trim().length?"WebComponentMap":o.page;return t.createElement(O,{url:`/data/1.0/mapsEnrichment/hotel/${s}?rn=${r}&rc=${c}&stayDates=&guestInfo=`,parser:(e,t)=>{if(e){var{hotels:i,hacStatus:o}=e,l=o&&(o.isHacComplete||o.hacPercentComplete>90);if(i&&1===i.length){var a=i[0];return{offers:a.offers&&a.offers.filter((e=>!!e.providerInfo)).map((e=>({offerClickToken:e.offerClickToken,price:e.price,status:e.status,provider:e.providerInfo.name,isInstantBook:e.providerInfo.isInstantBook}))),complete:l||r>=5}}}return{offers:[],complete:!!t}}},a)};return[()=>{I.defaultProps={offers:[],trackingProps:{module:"maps_hotel_offer",action:"commerce_click"},onOfferClick:E,preOfferClick:()=>{},priceSize:20},h=I,P.defaultProps={trackingProps:{module:"deferred_hotel_offer",action:"commerce_click"}},e({DeferredHotelOffer:P,HotelOffer:h})},[e=>(t=e,i=e.useContext),e=>(o=e.useGARecordCallback,l=e.useInteractionLogger),e=>a=e.default,e=>(s=e.default,c=e.useIntlFormatter),e=>(n=e.OptimusHotelOfferPrice,f=e.HotelOfferPrice,m=e.OptimusHotelOfferMessage),e=>(p=e.findFirstOffer,u=e.findWorstOffer),e=>(d=e.Visitor,v=e.Route),e=>g=e.default,e=>k=e.LoadingSpinner,e=>O=e.default]]},["cDcdfi","fsml46","7yGKf-","0DsHEV","9TT7ph","fTsrJe","2R4xv2","FHZ_Dz","V08PS7","w_dosq"]]);
