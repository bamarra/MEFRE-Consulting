(this.$WP=this.$WP||[]).push(["qtbwnp",(e,t)=>{"use strict";var n,i,a,l,r,o,c,s,d,m,u,g,f,p,_,h,I,v,b,E,y,T={gemini_dining_club_control:"DiningClubAd_Control",gemini_dining_club_2_for_1:"DiningClubAd_2For1Entree",gemini_dining_club_20_percent:"DiningClubAd_FixedDiscount",gemini_dining_club_variable_discount:"DiningClubAd_VariableDiscount"},C=({shelfItem:e,index:t,fetchedLoggedInUserInfo:i,geoId:a})=>{var l,o=r(E,a),{testVariant:c}=s({geoId:a}),{object:d}=e,m=null!=d.locationId?`${d.locationId}`:void 0,u=n.useCallback((()=>{o({actionType:"click",actionSubType:"card",itemPosition:t,itemId:m})}),[t,m,o]);if(!d)return null;var g=`${("LocationInformation"===d.__typename?d&&d.locationId||(null==(l=d.route)?void 0:l.url)||d.name:"")||""}:${t}`,f=n.createElement(v,{makeWrapperHaveDimensions:!0,onIsVisibleCallback:()=>{o({actionType:"scroll",actionSubType:"card",itemPosition:t,itemId:m})}},null),p={...e,restaurantItemUxHints:[...e.restaurantItemUxHints||[],"DINING_CLUB_SHELF_ITEM"]};return"gemini_dining_club_variable_discount"!==c&&(p.promotionPercentage=null),n.createElement(n.Fragment,null,0!==t&&f,n.createElement(I,{item:p,shelfItemKey:g,fetchedLoggedInUserInfo:i,filterListType:null,sponsoredPlacementData:null,marketingCampaignId:0,onClick:u}),0===t&&f)},D=({restaurants:e,placement:t,geoId:l,variant:o})=>{var s=r(E,l),{viewportCategory:d}=n.useContext(i),{locale:I}=n.useContext(a),y=u(I.code),[T,D,k,P]=_({threshold:100}),L="DESKTOP"===d,S=(e=>c.DINING_CLUB_LOCATIONS.get(e)||"")(l),w=n.useMemo((()=>"gemini_dining_club_2_for_1"===o?n.createElement(b,{id:"gemini.dc.2for1.shelf.title.new",args:{location:S}}):"gemini_dining_club_20_percent"===o?n.createElement(b,{id:"gemini.dc.20p.shelf.title.new",args:{location:S}}):"gemini_dining_club_variable_discount"===o?n.createElement(b,{id:"gemini.dc.variable.shelf.title.new",args:{location:S}}):""),[S,o]);return n.createElement(v,{onIsVisibleCallback:()=>{s({actionType:"scroll",actionSubType:"section",itemType:t})}},n.createElement("div",{className:"cLFuw Gp Pl PY Py PK"},n.createElement("div",{className:"blgkk f"},n.createElement("div",{className:"bSwdK"},n.createElement(p,{source:"img2/brand_refresh/Tripadvisor_logoset_solid_white.svg",alt:"logo"})),n.createElement(g,{color:"onDarkText",variant:"title-04",elementType:"h2",marginLeft:"spacing-03"},n.createElement(b,{id:"gemini.dc.product.name"}))),n.createElement("div",{className:"ePHPx f k"},n.createElement(g,{color:"onDarkText",variant:"title-03",elementType:"p"},w),n.createElement(f,{size:"large",variant:"on-dark",href:`/DiningClub?variant=${l}`,target:"_blank",onClick:()=>{s({actionType:"click",actionSubType:"cta",itemType:t})}},n.createElement(b,{id:"gemini.dc.shelf.cta"}))),n.createElement("div",{className:"cWadT _T"},n.createElement("div",{ref:T,className:m("cwuuX f","eHjvt _h _T")},e.map(((e,t)=>n.createElement(C,{geoId:l,key:`testShelf-${e&&e.id||t}`,shelfItem:e,index:t,fetchedLoggedInUserInfo:y})))),L&&n.createElement(n.Fragment,null,n.createElement(h,{show:k,direction:"left",onClick:()=>{var e;if(D){var t=D.children[0];e=D.children[3].offsetWidth+t.offsetLeft+2,D.scrollBy({left:-e,behavior:"smooth"})}}}),n.createElement(h,{show:P,direction:"right",onClick:()=>{var e;if(D){var t=D.children[0];e=D.children[3].offsetWidth+t.offsetLeft+2,D.scrollBy({left:e,behavior:"smooth"})}}})))))},k=(e,t)=>{var n=[...e];return[...Array(t)].map((()=>n.splice(Math.floor(Math.random()*n.length),1)[0]))},P=()=>{var e="list_banner",[t]=n.useContext(l),i=parseInt(t&&t.params.geoId||"",10),a=o(E,i),{testVariant:r,shouldAdsBeDisplayed:c}=s({geoId:i}),{fetchAll:m}=d(),[u,g]=n.useState([]);return n.useEffect((()=>{c&&m(i,r).then((({restaurantsList:e})=>{g(k(e,10))}))}),[m,i,c,r]),n.useEffect((()=>{u.length>0&&a({itemType:e,children:u.map(((e,t)=>({itemType:"card",itemPosition:t,itemId:null!=e.object.locationId?`${e.object.locationId}`:void 0,customData:null!=e.promotionPercentage?JSON.stringify({discount_percentage:e.promotionPercentage}):void 0})))})}),[u,a,e]),u.length>0?n.createElement(y,{placement:e,restaurants:u,geoId:i,variant:r}):null},L=()=>{var e="review_banner",[t]=n.useContext(l),i=parseInt(t&&t.params.geoId||"",10),a=parseInt(t&&t.params.detailId||"",10),{fetchAll:r,fetchOne:c,currentRestaurant:m}=d(),{testVariant:u,isUserSuitableForTest:g,shouldAdsBeDisplayed:f}=s({geoId:(null==m?void 0:m.geoId)||i}),p=o(E,(null==m?void 0:m.geoId)||i),[_,h]=n.useState([]);return n.useEffect((()=>{g&&c(i,a).then((e=>{!e&&f&&r(i,u).then((({restaurantsList:e})=>h(k(e,10))))}))}),[r,c,a,i,g,f,u]),n.useEffect((()=>{_.length>0&&p({itemType:e,children:_.map(((e,t)=>({itemType:"card",itemPosition:t,itemId:null!=e.object.locationId?`${e.object.locationId}`:void 0,customData:null!=e.promotionPercentage?JSON.stringify({discount_percentage:e.promotionPercentage}):void 0})))})}),[m,_,p,e,i]),_.length>0?n.createElement(y,{placement:e,restaurants:_,geoId:i,variant:u}):null};return[()=>{E={itemNameVariants:T},y=D,e({DiningClubRestaurantListShelf:P,DiningClubRestaurantReviewShelf:L})},[e=>n=e,e=>(i=e.Device,a=e.Environment,l=e.Route),e=>(r=e.useDynamicPageInteractionLogger,o=e.useDynamicPageImpressionLogger),e=>(c=e.Constants,s=e.useDiningClubTest),e=>d=e.default,e=>m=e.default,e=>u=e.useOwnerInfo,e=>g=e.default,e=>f=e.default,e=>p=e.default,e=>(_=e.useCanScroll,h=e.ScrollArrow),e=>I=e.ShelfItem,e=>v=e.IsVisibleOnce,e=>b=e.default]]},["cDcdfi","2R4xv2","qEkOmT","1GkG4X","lOKOGh","jSLlaY","47taKH","VP50Wc","7yGKf-","BgJkqv","Ml_Lf3","ngiT-o","BLrxBS","0DsHEV"]]);
