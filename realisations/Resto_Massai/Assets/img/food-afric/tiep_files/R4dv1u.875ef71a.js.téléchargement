(this.$WP=this.$WP||[]).push(["R4dv1u",(e,t)=>{"use strict";var a,o,s,r,n,i,c,l,h,u,d,m=e=>{var[t,s]=a.useState(e.defaultVisible),c=i(),{localize:l}=n(),u=a.useCallback((()=>{s(!0)}),[]),{map:d}=e;a.useEffect((()=>(d.on("centerChange",u),d.on("zoomChange",u),()=>{d.off("centerChange",u),d.off("zoomChange",u)})),[d,u]);var m=a.useCallback((()=>{c({module:"map_view",action:"redo"}),e.onRedoSearch(),s(!1)}),[e,c]);if("Rounded"===e.variant){var p=l.string("map_search_redo_search_button_text");return t&&a.createElement("div",null,e.visibilityTracker,a.createElement(h,{label:p,ariaLabel:p,onClick:m}))}return t&&a.createElement("div",{className:"cPDsf d R2 _T _S C4",onClick:m},a.createElement("span",{className:"jeArU"},a.createElement(o,{name:"refresh"})),a.createElement("span",{className:"eLmQc _T H5 C4 W7"},a.createElement(r,{id:"map_search_redo_search_button_text"})))},p=e=>a.createElement(l,null,(({map:t})=>t?a.createElement(m,Object.assign({},e,{map:t})):null)),C=e=>{var t=c({module:"search_toggle",action:"active"}),o=c({module:"search_toggle",action:"inactive"});return a.createElement(u,Object.assign({trackCheckboxClick:e=>e?t():o()},e))},v=e=>a.createElement(l,null,(({map:t})=>t&&a.createElement(C,{defaultChecked:e.defaultChecked,onRedoSearch:e.onRedoSearch,map:t,variant:e.variant,onClickRedoSearchButton:e.onClickRedoSearchButton,onClickSearchAsIMoveMapButton:e.onClickSearchAsIMoveMapButton,searchThisAreaVisibilityTracker:e.searchThisAreaVisibilityTracker})));return[()=>{p.defaultProps={defaultVisible:!1},d=p,(u=class extends a.PureComponent{constructor(...e){super(...e),this.state={autoSearchEnabled:null,mapHasMoved:!1,hasHadUserInteraction:!1},this.onCheckboxClicked=()=>{var e=null===this.state.autoSearchEnabled?!this.props.defaultChecked:!this.state.autoSearchEnabled;this.props.onClickSearchAsIMoveMapButton&&this.props.onClickSearchAsIMoveMapButton(e),this.props.trackCheckboxClick(e),this.setState({autoSearchEnabled:e,hasHadUserInteraction:!0})},this.onMapMoved=e=>{this.isAutoSearchEnabled()?this.onAutoSearch(e.userGesture):this.setState({mapHasMoved:!0,hasHadUserInteraction:e.userGesture})},this.onAutoSearch=e=>{this.timeout&&clearTimeout(this.timeout),this.timeout=setTimeout((()=>{this.props.onRedoSearch(!0,e),this.timeout=null}),0),this.setState({mapHasMoved:!1})},this.onManualRedoSearch=()=>{this.props.onClickRedoSearchButton&&this.props.onClickRedoSearchButton(),this.props.onRedoSearch(!1,!0),this.setState({mapHasMoved:!1,hasHadUserInteraction:!0})},this.timeout=void 0}componentDidMount(){var{map:e}=this.props;e.on("centerChange",this.onMapMoved),e.on("zoomChange",this.onMapMoved)}componentWillUnmount(){var{map:e}=this.props;e.off("centerChange",this.onMapMoved),e.off("zoomChange",this.onMapMoved),this.timeout&&clearTimeout(this.timeout)}isAutoSearchEnabled(){return null!==this.state.autoSearchEnabled?this.state.autoSearchEnabled:this.props.defaultChecked}render(){var e=this.isAutoSearchEnabled();return!this.isAutoSearchEnabled()&&this.state.mapHasMoved&&this.state.hasHadUserInteraction?a.createElement(d,{onRedoSearch:this.onManualRedoSearch,defaultVisible:!0,variant:this.props.variant,visibilityTracker:this.props.searchThisAreaVisibilityTracker}):"Rounded"===this.props.variant?a.createElement("div",{className:"foiYh"},a.createElement(s,{value:"autoSearchToggle",label:a.createElement(r,{id:"map_auto_search_label"}),textVariant:"button-01",theme:"on-light",checked:!!e,onToggle:this.onCheckboxClicked})):a.createElement("div",{className:"DdQqm _T _S"},a.createElement("div",{className:"ChhIK _T",onClick:this.onCheckboxClicked},a.createElement("div",{className:"gaFxt _T c"},e&&a.createElement("span",{className:"dPURb"},a.createElement(o,{name:"checkmark"}))),a.createElement("span",{className:"fuGKY H5 W7"},a.createElement(r,{id:"map_auto_search_label"}))))}}).defaultProps={defaultChecked:!1,variant:"Rectangular"},v.defaultProps={defaultChecked:!1,variant:"Rectangular"},e({AutoSearchToggle:v,RedoSearchButton:d})},[e=>a=e,e=>o=e.default,e=>s=e.Checkbox,e=>(r=e.default,n=e.useLocalize),e=>(i=e.useGARecorder,c=e.useGARecordCallback),e=>l=e.MapContextConsumer,e=>h=e.TextFloatingActionButton]]},["cDcdfi","pyY-iJ","MsxLpS","0DsHEV","fsml46","VwUieX","yIC5Nu"]]);
