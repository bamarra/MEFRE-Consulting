(this.$WP=this.$WP||[]).push(["FMwI_q",(e,t)=>{"use strict";var s,a,i,n,r,d,h,u,o="active",c="passive",f="hidden",g="frozen",v="terminated",l=e=>(e.preventDefault(),e.returnValue="Are you sure?"),_=e=>e.reduce(((e,t,s)=>(e[t]=s,e)),{}),p=()=>"undefined"==typeof document||document.visibilityState===f?f:document.hasFocus()?o:c;return[()=>{s=class{constructor(e){this.type=e}},a=class{constructor(){this._registry={}}addEventListener(e,t,s=!1){this._getRegistry(e).push(t)}removeEventListener(e,t,s=!1){var a=this._getRegistry(e),i=a.indexOf(t);i>-1&&a.splice(i,1)}dispatchEvent(e){return e.target=this,Object.freeze(e),this._getRegistry(e.type).forEach((t=>t(e))),!0}_getRegistry(e){return this._registry[e]=this._registry[e]||[]}},i=class extends s{constructor(e,t){super(e),this.newState=t.newState,this.oldState=t.oldState,this.originalEvent=t.originalEvent}},n="object"==typeof safari&&safari.pushNotification,r="undefined"!=typeof self&&"onpageshow"in self,d=["focus","blur","visibilitychange","freeze","resume","pageshow",r?"pagehide":"unload"],h=[[o,c,f,v],[o,c,f,g],[f,c,o],[g,f],[g,o],[g,c]].map(_),u=new class extends a{constructor(){super();var e=p();this._state=e,this._unsavedChanges=[],this._handleEvents=this._handleEvents.bind(this),"undefined"!=typeof addEventListener&&(d.forEach((e=>addEventListener(e,this._handleEvents,!0))),n&&addEventListener("beforeunload",(e=>{this._safariBeforeUnloadTimeout=setTimeout((()=>{e.defaultPrevented||e.returnValue.length>0||this._dispatchChangesIfNeeded(e,f)}),0)})))}get state(){return this._state}get pageWasDiscarded(){return"undefined"!=typeof document&&document.wasDiscarded||!1}addUnsavedChanges(e){!this._unsavedChanges.indexOf(e)>-1&&(0===this._unsavedChanges.length&&addEventListener("beforeunload",l),this._unsavedChanges.push(e))}removeUnsavedChanges(e){var t=this._unsavedChanges.indexOf(e);t>-1&&(this._unsavedChanges.splice(t,1),0===this._unsavedChanges.length&&removeEventListener("beforeunload",l))}_dispatchChangesIfNeeded(e,t){if(t!==this._state)for(var s=((e,t)=>{for(var s,a=0;s=h[a];++a){var i=s[e],n=s[t];if(i>=0&&n>=0&&n>i)return Object.keys(s).slice(i,n+1)}return[]})(this._state,t),a=0;a<s.length-1;++a){var n=s[a],r=s[a+1];this._state=r,this.dispatchEvent(new i("statechange",{oldState:n,newState:r,originalEvent:e}))}}_handleEvents(e){switch(n&&clearTimeout(this._safariBeforeUnloadTimeout),e.type){case"pageshow":case"resume":this._dispatchChangesIfNeeded(e,p());break;case"focus":this._dispatchChangesIfNeeded(e,o);break;case"blur":this._state===o&&this._dispatchChangesIfNeeded(e,p());break;case"pagehide":case"unload":this._dispatchChangesIfNeeded(e,e.persisted?g:v);break;case"visibilitychange":this._state!==g&&this._state!==v&&this._dispatchChangesIfNeeded(e,p());break;case"freeze":this._dispatchChangesIfNeeded(e,g)}}},e("default",u)},[]]},[]]);
