(this.$WP=this.$WP||[]).push(["PiTJFd",(e,t)=>{"use strict";var a,l,r,n,i,d,o,s,c,u,m,_,p,T,v,E="bcHFL _c",C=({trip:e,messageType:t,onCtaClick:i})=>{var d,o=a.useCallback((()=>{var t,a;i&&i(),null!=(t=e.route)&&t.url&&(window.location=null==(a=e.route)?void 0:a.url)}),[i,e]),s=a.createElement("div",{onClick:o},a.createElement(l,{id:"stat_modal_view_trip_v2"}));switch(t){case"CREATED":d=a.createElement(r,{id:"create_trip_success_toast_with_bold",args:{TripName:u((null==e?void 0:e.title)||"")}});break;case"SAVED":d=a.createElement(r,{id:"stat_modal_saved_to_tripname_with_bold",args:{TripName:u((null==e?void 0:e.title)||"")}});break;default:d=null}return a.createElement(n,{cta:s},a.createElement(m,{element:"savedToast",trip:e},a.createElement("span",{className:E},d)))},h="bxSlw",k=({trip:e,onUndo:t})=>{var i,d=a.createElement("div",{onClick:t},a.createElement(l,{id:"stat_modal_undo"}));return a.createElement(n,{cta:d},a.createElement(m,{element:"unsaveToast",trip:e},a.createElement("span",{className:E},a.createElement(r,{id:"stat_modal_removed_from_tripname_with_bold_v3",args:{TripName:u(null==e?void 0:e.title),TripLink:(null==(i=e.route)?void 0:i.url)||"",TripClass:h}}))))},b=({trip:e,hideCta:t,onCtaClick:i})=>{var d,o=a.useCallback((()=>{i()}),[i]),s=a.createElement("div",{onClick:o},a.createElement(l,{id:"stat_modal_change"}));return a.createElement(n,{cta:t?null:s},a.createElement(m,{element:"savedToast",trip:e},a.createElement("span",{className:E},a.createElement(r,{id:"stat_modal_saved_to_tripname_with_bold_v3",args:{TripName:u(null==e?void 0:e.title),TripLink:(null==(d=e.route)?void 0:d.url)||"",TripClass:h}}))))},I=({onUndo:e})=>{var t=a.createElement("div",{onClick:e},a.createElement(l,{id:"stat_modal_undo"}));return a.createElement(n,{cta:t},a.createElement(l,{id:"stat_modal_removed_from_tripname",args:{sTripName:a.createElement(l,{id:"m1_trips_my_saves_header"})}}))},y=()=>{var[e,t]=a.useContext(i),[,r]=d(o),u=a.useCallback(((e,t)=>r({tripId:e,referenceId:`${t.id}`,referenceType:t.type,allowDuplicates:!1}).then((e=>{var t,a,l,r,n,i,d,o=null==e||null==(t=e.data)?void 0:t.addItemToTrip,s=null==e||null==(a=e.data)||null==(l=a.addItemToTrip)?void 0:l.trip,c=null==e||null==(r=e.data)||null==(n=r.addItemToTrip)||null==(i=n.errors)||null==(d=i[0])?void 0:d.error;return{trip:s,error:o?null:{query:"ADD_ITEM_TO_TRIP",tripsError:c||void 0}}})).catch((()=>({trip:null,error:{query:"ADD_ITEM_TO_TRIP"}})))),[r]),m=a.useCallback(((t,l,r)=>{e({node:a.createElement(_,{trip:t,messageType:l,onCtaClick:r})})}),[e]),E=a.useCallback(((t,l,r)=>{e({node:a.createElement(p,{trip:t,onUndo:()=>{u(t.id,l).then((e=>{r&&r(e.trip,e.error)}))}})})}),[u,e]),C=a.useCallback(((l,r,n,i=8e3)=>{e({node:a.createElement(T,{trip:l,onCtaClick:()=>{r&&r(),t()},hideCta:n}),timeout:i})}),[e,t]),h=a.useCallback((()=>{e({node:a.createElement(n,null,a.createElement(l,{id:"m1_trips_save_success_stat_d2"}))})}),[e]),[,k]=d(s),b=a.useCallback((e=>k({id:`${e.id}`,type:e.type}).then((e=>{var t;return{isAdded:!(null==e||null==(t=e.data)||!t.MySaves_addToMySavesSingle)}})).catch((()=>({isAdded:!1})))),[k]),I=a.useCallback(((t,l)=>{e({node:a.createElement(v,{onUndo:()=>{b(t).then((e=>{l(e.isAdded)}))}})})}),[e,b]),y=a.useCallback((t=>e({node:a.createElement(n,null,t)})),[e]);return{launchViewTripToast:m,launchRemoveFromTripToast:E,launchAutoSavedToTripToast:C,launchAddItemToMySavesToast:h,launchRemoveItemFromMySavesToast:I,launchErrorTripToast:a.useCallback((t=>{var l=a.createElement(n,null,a.createElement(c,{query:t.query,error:t.tripsError}));e({node:l})}),[e]),launchToastMessage:y}};return[()=>{_=C,p=k,T=b,v=I,e("default",y)},[e=>a=e,e=>(l=e.default,r=e.UnsafeLocalize),e=>(n=e.ToastItem,i=e.Toast),e=>d=e.useMutation,e=>(o=e.AddItemToTrip,s=e.AddItemToMySaves),e=>c=e.default,e=>u=e.escapeHtml,e=>m=e.TripsImpression]]},["cDcdfi","0DsHEV","Q7TAd7","5X2em-","RXx5aI","9I0t-6","WkP2XE","c_rvp5"]]);
