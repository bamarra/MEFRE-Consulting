(this.$WP=this.$WP||[]).push(["eFKnUp",(e,t)=>{"use strict";var r,o,i,n,a,s,p,l,c,u,d=e=>e.photo&&e.photo.photoSizes[e.photo.photoSizes.length-1]?e.photo.photoSizes[e.photo.photoSizes.length-1]:null,v=e=>[e.owner||e.userProfile,...(e.collaborators||[]).map((e=>e.user))].filter(Boolean),f=(e,t)=>v(e).some((e=>e.isMe||e.userId&&e.userId===t||e.id&&e.id===t)),m=e=>{var t;return null!=(t=e.owner)&&t.isMe?"OWNER":e&&f(e)?"COLLABORATOR":"PUBLIC"},h=(e,t,r,o)=>{var i=v(e);if(i=i.slice(0,t),r>0){var n=0;i=i.filter((e=>(n=e.displayName.length+n)<r))}return o&&(i=i.reverse()),i},y=(e,t)=>[...t||[]].sort(((e,t)=>e.created>t.created?1:-1)),P=e=>{var t;return null==e||null==(t=e.owner)?void 0:t.isMe},w=e=>e.owner&&e.owner.isMe?"OWNER":f(e)?"COLLABORATOR":"VIEWER",I=(e,t)=>(e.items||[]).find((e=>{var r,o=e.reference&&e.reference.type&&e.reference.type.toLowerCase(),i=null==(r=e.reference)?void 0:r.id,n=t.type.toLowerCase(),a=t.id.toString(),s=t.originalObject&&t.originalObject.type&&t.originalObject.type.toLowerCase(),p=t.originalObject&&t.originalObject.id.toString();return o===n&&i===a||o===s&&i===p})),T=(e,t)=>{var r=I(e,t);return r?r.id:null},O={locationinformation:"location",attractionproductinformation:"attractionProduct",forumpost:"post",tripitem:"savesItem",linkpost:"link",linkpost_linkpostv2:"link",photo:"photo",video:"video",review:"review",repost:"repost",trip:"bundleSave",tripnotes_tripnote:"note"},b={locationinformation:"LOCATION",attractionproductinformation:"ATTRACTIONPRODUCT",forumpost:"POST",tripitem:"SAVESITEM",linkpost:"LINK",photo:"PHOTO",video:"VIDEO",review:"REVIEW",repost:"REPOST",trip:"TRIPCONTENT"},L=e=>({statQuery:e}),R=e=>O[e.toLowerCase()],S=e=>b[e.toLowerCase()],_=["LocationInformation","AttractionProductInformation","ForumPost","LinkPost","LinkPost_LinkPostV2","Review","Photo","Video","Repost","Trip","TripNotes_TripNote"],g=e=>{switch(e.__typename){case"AttractionProductInformation":case"LocationInformation":return[e];case"Photo":case"Review":return[e.location];case"Video":return e.orderedLocations;case"ForumPost":case"LinkPost":case"TripNote":default:return[]}},k=(e,t)=>{if(!e)return null;var r=(e=>{var t,r,o,i,n,a;return null!=(t=null!=(r=null!=(o=null!=(i=null!=(n=null!=(a=e.locationId)?a:e.attractionProductId)?n:e.postId)?i:e.repostId)?o:e.linkPostId)?r:e.id)?t:void 0})(e),o=e.__typename?R(e.__typename):null;if(null!=r&&null!=o){if(_.includes(e.__typename))return{type:o,id:r};var i={id:e.reference.id,type:"attractionproduct"===e.reference.type?"attractionProduct":e.reference.type};if("TripItem"===e.__typename&&e.reference&&e.reference.id&&e.reference.type)return t&&"note"!==i.type?i:{type:o,id:r,originalObject:i}}return null},j=e=>({id:`${e.id}`,type:e.type}),C=(e,t)=>`/Trips/${e}${t?`?itemId=${t}`:""}`,A=e=>{var t=u[e.type];return t?{...e,query:t.statQuery,variables:{ids:[e.id]}}:null},E=e=>{var t,r;return["LinkPost","Photo","Review","Video"].includes(null==e||null==(t=e.object)||null==(r=t.repostedObject)?void 0:r.__typename)},F=(e,t)=>{if("_blank"===t){var r=window.open("about:blank",t);return()=>{r.location=e}}return()=>{window.open(e,t)}};function N(e,t){return e.reduce(((e,r)=>(t(r)?e[0].push(r):e[1].push(r),e)),[[],[]])}var V=e=>{if("LinkPost_LinkPostV2"===e.__typename){var t=e.preview&&e.preview.media||[];if(!t.length)return[];t=t.reduce(((e,t)=>t&&t.object?[...e,t]:e),[]).sort(((e,t)=>t.id-e.id));var[r,o]=N(t,(e=>"LinkPreview_PhotoRefV2"===e.__typename));if(r.length){var[i]=r;return i.object&&i.object.photoSizes||[]}if(o.length){var[n]=o;return n.object?[n.object]:[]}}if("LinkPost"===e.__typename){var a=e.preview&&e.preview.media||[];if(!a.length)return[];var s=e=>e.photoId||e.previewId||0;a=a.filter(Boolean).sort(((e,t)=>s(t)-s(e)));var[p,l]=N(a,(e=>"Photo"===e.__typename));if(p.length){var[c]=p;return c.photoSizes||[]}if(l.length)return[l[0]]}return[]};return[()=>{u=Object.freeze({location:L(c),attractionProduct:L(r),post:L(o),savesItem:L(i),link:L(n),review:L(a),photo:L(s),video:L(p),repost:L(l)}),e({buildPublicTripShareUrl:C,getCommentsForDisplay:y,getItemByReference:I,getItemIdByReference:T,getPhotoSizesForLinkPost:V,getQueryReferenceTypeFromObjectType:S,getReferenceTypeFromObjectType:R,getTripCoverPhoto:d,getTripUsers:v,getTripUsersForDisplay:h,isOwner:P,isRepostSaveable:E,isTripUser:f,locationsForItem:g,objectStatisticQuery:A,toReference:j,toSavesObject:k,userRelation:w,userTypeFromTrip:m,windowOpener:F})},[e=>(r=e.AttractionStatistics,o=e.ForumStatistics,i=e.TripItemStatistics,n=e.LinkPostStatistics,a=e.ReviewStatistics,s=e.PhotoStatistics,p=e.VideoStatistics,l=e.RepostStatistics,c=e.LocationStatistics)]]},["RXx5aI"]]);
