(this.$WP=this.$WP||[]).push(["wbt5GG",(t,e)=>{"use strict";var i,a,n,s,o,r,c,l,h,p,u,m,L={icon:"/img2/maps/icons/my_location_dot.png",width:30,height:30,anchor:{x:15,y:15}},d=({variant:t="Square",onClick:e})=>{var a=l(),{map:n}=i.useContext(h),{localize:s}=c();return n&&i.createElement(m,{map:n,tracker:a,deniedText:s.string("mw_js_positionPermissionDenied"),variant:t,onClick:e,ariaLabel:s.string("phoenix_maps_accessibility_locate_me")})};return[()=>{m=class extends i.Component{constructor(...t){super(...t),this.state={trackingLocation:!1,active:!1},this.setInactive=()=>{this.setState({active:!1})},this.setMapInteractionListeners=()=>{var{map:t}=this.props;t&&t.once("panStart",this.setInactive)},this.clearMapInteractionListeners=()=>{var{map:t}=this.props;t&&t.off("panStart",this.setInactive)},this.moveMapToNewLocation=t=>{var{map:e}=this.props;e&&e.setCenter(t,16,!0)},this.isLatLngValid=t=>0!==t.lat||0!==t.lng,this.trackClick=()=>{this.props.tracker({module:"find_me",action:"find_me_click"})},this.askForLocation=()=>{if(this.trackClick(),this.setState({active:!0}),this.state.trackingHandler)this.state.userLocation&&(this.moveMapToNewLocation(this.state.userLocation),this.setMapInteractionListeners());else{var t=n(((t,e)=>{var i=new p(t,e);this.isLatLngValid(i)&&(this.state.trackingLocation||(this.moveMapToNewLocation(i),this.setMapInteractionListeners()),this.setState({userLocation:i,trackingLocation:!0}))}),(()=>{window.alert(this.props.deniedText),this.setState({active:!1,trackingHandler:null})}));this.setState({trackingHandler:t})}},this.onClickCircularFloatingActionButton=()=>{this.props.onClick&&this.props.onClick(),this.askForLocation()}}componentWillUnmount(){this.state.trackingHandler&&(s(this.state.trackingHandler),this.clearMapInteractionListeners())}render(){var t=this.state.userLocation?i.createElement(u,{position:this.state.userLocation,width:L.width,height:L.height,src:L.icon,anchor:L.anchor}):null;return"Circle"===this.props.variant?i.createElement("div",null,i.createElement(r,{icon:this.state.active?"nearby-fill":"nearby",ariaLabel:this.props.ariaLabel,onClick:this.onClickCircularFloatingActionButton,onKeyDown:this.onClickCircularFloatingActionButton}),t):i.createElement("div",null,i.createElement("div",{className:"evJHe Fh u V S8 H7",onClick:this.askForLocation},i.createElement("span",{className:a("DFxSX Z1 e c G5",this.state.active?"fgGIg":"")},i.createElement(o,{name:"nearby"}))),t)}},t("default",d)},[t=>i=t,t=>a=t.default,t=>(n=t.watchLocation,s=t.clearWatch),t=>o=t.default,t=>r=t.CircularFloatingActionButton,t=>c=t.useLocalize,t=>l=t.useGARecorder,t=>(h=t.MapContext,p=t.LatLng,u=t.IconMarker)]]},["cDcdfi","jSLlaY","fiorRT","pyY-iJ","yIC5Nu","0DsHEV","fsml46","VwUieX"]]);
