(this.$WP=this.$WP||[]).push(["NeKuL5",(e,a)=>{"use strict";var n,i,t,l,r,d,o,s,u,c,m,v,k,f,_,g,N,y,S,p,b,E,I=({message:e,tooltip:a,cta:i})=>n.createElement("div",{className:"brYEM S4"},e&&n.createElement("span",{className:"SljIb"},e),a&&n.createElement(c,{below:!0,message:a},(e=>n.createElement("span",{ref:e}," ",n.createElement(m,{color:"primaryIcon",name:"info"})))),i&&n.createElement(n.Fragment,null,n.createElement("span",{className:"ejNWk"}),n.createElement("span",{className:"eqzOw b Wb"},i))),D=e=>{switch(e){case"OWNER":return 0;case"SCRAPER":return 2;default:return 1}},T=({locationId:e,giftCardUrl:a,trackingData:i})=>{var t=a?"update":"add",l=o({...i,action:`covid19_${t}_giftcard_alert_impression`});n.useEffect((()=>{l()}),[l]);var r=o({...i,action:`covid19_${t}_giftcard_alert_click`});return n.createElement(g,{message:n.createElement(u,{id:"covid19_rr_restaurant_owner_gift_card",args:{boldStart:"<b>",boldEnd:"</b>"}}),cta:n.createElement("a",{href:`/ManageListing-d${e}#/general`,onClick:r},a?n.createElement(s,{id:"covid19_rr_restaurant_owner_update_giftcard"}):n.createElement(s,{id:"covid19_rr_restaurant_owner_add_giftcard"}))})},F=({giftCardUrl:e,trackingData:a})=>{var i=o({...a,action:"covid-19-gift-card-alert-shown"});n.useEffect((()=>{i()}),[i]);var t=o({...a,action:"covid-19-gift-card-alert-click"}),l=n.createElement(s,{id:"covid19_restaurant_gift_card_info"});return e?n.createElement(g,{message:n.createElement(u,{id:"covid19_restaurant_gift_card2",args:{boldStart:"<b>",boldEnd:"</b>"}}),tooltip:l,cta:n.createElement("a",{href:e,target:"_blank",onClick:t},n.createElement(s,{id:"covid19_purchase_online_gift_card"}))}):n.createElement(g,{message:n.createElement(u,{id:"covid19_purchase_offline_gift_card2",args:{boldStart:"<b>",boldEnd:"</b>"}}),tooltip:l})},O=({locationId:e})=>{var a,i,l,r,d,o,s={module:"Restaurant_Review",context:String(e),action:""},[u]=t({query:k,variables:{locationId:e}}),c=null==(a=u.data)||null==(i=a.ownerPropertiesForUserLocation)?void 0:i.ownerStatus,m=null!=c&&"NOT_AN_OWNER"!==c,[v]=t({query:_,variables:{locationId:e}}),f=null==(l=v.data)||null==(r=l.Menus_getGiftcards)?void 0:r[0],g=null==f||null==(d=f.ownerIndicator)?void 0:d.hasOwnerVerifiedGiftcard,N=null==(o=((null==f?void 0:f.urls)||[]).reduce(((e,a)=>!e||D(e.updatedBy)>D(null==a?void 0:a.updatedBy)?a:e),null))?void 0:o.url;if(!v.fetching){if(m)return n.createElement(T,{locationId:e,giftCardUrl:N,trackingData:s});if(null==g&&N||g)return n.createElement(F,{giftCardUrl:N,trackingData:s})}return null},w=({takoutStatus:e})=>{if(!e||!e.deliveryTakeoutOnly)return null;var a,{endDate:n}=e;if(n){if(((e=>{if(!e)return null;var a=e.split("-");if(3===a.length){var n=parseInt(a[0],10),i=parseInt(a[1],10),t=parseInt(a[2],10);if(n&&i&&t)return new Date(n,i-1,t)}return null})(n)||new Date)<new Date)return null;a=i.createElement(u,{id:"eat_r_covid19_banner_takeout_only_date_v1",args:{date:n}})}else a=i.createElement(u,{id:"eat_r_covid19_banner_takeout_only_v1"});return i.createElement(g,{message:a})},V=({locationId:e})=>{var[{error:a,data:n}]=t({query:S,variables:{lid:{locationId:e}}});if(a)return null;var l=null==n?void 0:n.RestaurantCommerceSelection_getDeliveryTakeoutOnlyStatus;return l?i.createElement(w,{takoutStatus:l}):null},h=()=>{var e,a,i,o,s,[u]=n.useContext(l),c=u.params.detailId||0,[{data:m,fetching:v,error:k}]=t({query:E,variables:{locationId:c,includeUnavailableTags:!1},pause:!r("restaurants_review_covid19_travel_safe_module")}),f=null==m||null==(e=m.safetyInfo)||null==(a=e[0])||null==(i=a.managementResponse)?void 0:i.body,_=null==m||null==(o=m.safetyInfo)||null==(s=o[0])?void 0:s.safetyTags,g=_&&_.length>0,y=f?(e=>{try{return JSON.parse(e)}catch(e){return console.error("Invalid json was received",e),{}}})(f):null,S=y&&"covid-19"===y.type&&y.body;return!r("restaurants_review_covid19_travel_safe_module")||v||k||!g&&!S?n.createElement(n.Fragment,null,n.createElement(p,{locationId:c}),n.createElement(N,{locationId:c})):n.createElement(d,{hasSafetyTags:!!g,locationType:"RESTAURANT"})};return[()=>{(v=JSON.parse('{"kind":"Document","definitions":[{"kind":"OperationDefinition","operation":"query","name":{"kind":"Name","value":"OwnerStatus"},"variableDefinitions":[{"kind":"VariableDefinition","variable":{"kind":"Variable","name":{"kind":"Name","value":"locationId"}},"type":{"kind":"NonNullType","type":{"kind":"NamedType","name":{"kind":"Name","value":"Int"}}},"directives":[]}],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"ownerPropertiesForUserLocation"},"arguments":[{"kind":"Argument","name":{"kind":"Name","value":"locationId"},"value":{"kind":"Variable","name":{"kind":"Name","value":"locationId"}}}],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"ownerStatus"},"arguments":[],"directives":[]}]}}]}}],"loc":{"start":0,"end":129}}')).__key=69209008221433,k=v,(f=JSON.parse('{"kind":"Document","definitions":[{"kind":"OperationDefinition","operation":"query","name":{"kind":"Name","value":"GiftCard"},"variableDefinitions":[{"kind":"VariableDefinition","variable":{"kind":"Variable","name":{"kind":"Name","value":"locationId"}},"type":{"kind":"NonNullType","type":{"kind":"NamedType","name":{"kind":"Name","value":"Int"}}},"directives":[]}],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"Menus_getGiftcards"},"arguments":[{"kind":"Argument","name":{"kind":"Name","value":"request"},"value":{"kind":"ListValue","values":[{"kind":"Variable","name":{"kind":"Name","value":"locationId"}}]}}],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"ownerIndicator"},"arguments":[],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"hasOwnerVerifiedGiftcard"},"arguments":[],"directives":[]}]}},{"kind":"Field","name":{"kind":"Name","value":"urls"},"arguments":[],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"url"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"updatedBy"},"arguments":[],"directives":[]}]}}]}}]}}],"loc":{"start":0,"end":198}}')).__key=86472492928141,_=f,g=I,N=O,(y=JSON.parse('{"kind":"Document","definitions":[{"kind":"OperationDefinition","operation":"query","name":{"kind":"Name","value":"CovidTakeoutQuery"},"variableDefinitions":[{"kind":"VariableDefinition","variable":{"kind":"Variable","name":{"kind":"Name","value":"lid"}},"type":{"kind":"NonNullType","type":{"kind":"NamedType","name":{"kind":"Name","value":"RestaurantCommerceSelection_RestaurantDeliveryTakeoutOnlyStatusRequestInput"}}},"directives":[]}],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"RestaurantCommerceSelection_getDeliveryTakeoutOnlyStatus"},"arguments":[{"kind":"Argument","name":{"kind":"Name","value":"request"},"value":{"kind":"Variable","name":{"kind":"Name","value":"lid"}}}],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"locationId"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"deliveryTakeoutOnly"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"endDate"},"arguments":[],"directives":[]}]}}]}}],"loc":{"start":0,"end":255}}')).__key=88675978293840,S=y,p=V,(b=JSON.parse('{"kind":"Document","definitions":[{"kind":"OperationDefinition","operation":"query","name":{"kind":"Name","value":"SafetyMeasuresQuery"},"variableDefinitions":[{"kind":"VariableDefinition","variable":{"kind":"Variable","name":{"kind":"Name","value":"locationId"}},"type":{"kind":"NonNullType","type":{"kind":"NamedType","name":{"kind":"Name","value":"Int"}}},"directives":[]},{"kind":"VariableDefinition","variable":{"kind":"Variable","name":{"kind":"Name","value":"includeUnavailableTags"}},"type":{"kind":"NamedType","name":{"kind":"Name","value":"Boolean"}},"directives":[]}],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","alias":{"kind":"Name","value":"safetyInfo"},"name":{"kind":"Name","value":"HealthSafety_getSafetyInfo"},"arguments":[{"kind":"Argument","name":{"kind":"Name","value":"request"},"value":{"kind":"ObjectValue","fields":[{"kind":"ObjectField","name":{"kind":"Name","value":"locationId"},"value":{"kind":"Variable","name":{"kind":"Name","value":"locationId"}}},{"kind":"ObjectField","name":{"kind":"Name","value":"includeUnavailableTags"},"value":{"kind":"Variable","name":{"kind":"Name","value":"includeUnavailableTags"}}}]}}],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"managementResponse"},"arguments":[],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"id"},"arguments":[],"directives":[]},{"kind":"Field","name":{"kind":"Name","value":"body"},"arguments":[],"directives":[]}]}},{"kind":"Field","name":{"kind":"Name","value":"safetyTags"},"arguments":[],"directives":[],"selectionSet":{"kind":"SelectionSet","selections":[{"kind":"Field","name":{"kind":"Name","value":"tagId"},"arguments":[],"directives":[]}]}}]}}]}}],"loc":{"start":0,"end":319}}')).__key=0x876c31e972c7,E=b,e("default",h)},[e=>(n=e,i=e.default),e=>t=e.useQuery,e=>l=e.Route,e=>r=e.featureIsEnabled,e=>d=e.default,e=>o=e.useGARecordCallback,e=>(s=e.default,u=e.UnsafeLocalize),e=>c=e.default,e=>m=e.default]]},["cDcdfi","5X2em-","2R4xv2","-i3PJS","9kM7rC","fsml46","0DsHEV","x9N_Dh","pyY-iJ"]]);
