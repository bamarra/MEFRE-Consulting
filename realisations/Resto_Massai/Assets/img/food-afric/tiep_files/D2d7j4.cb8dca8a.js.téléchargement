(this.$WP=this.$WP||[]).push(["D2d7j4",(e,t)=>{"use strict";var a,s,o,n,i,r,l,h,c,d,p,u,m,v,S,w,E,M,g,k,L,f,C,I,H,P,O,A,B,R="ZOdqX",y=e=>a.createElement("div",{className:"dzwGB G5"},a.createElement("span",{className:"beLEg"},a.createElement(M,{name:"map-pin-fill"})),a.createElement("span",{className:"fHAgQ _Q q W o W7"},e.locationName),a.createElement("span",{className:"eBXIg _Q _S",onClick:e.onClose},a.createElement(M,{name:"times"}))),x=()=>window&&window.location&&"#MAPVIEW"===window.location.hash;return[()=>{I=y,k=class extends a.PureComponent{constructor(e){super(e),this.onMapLoaded=e=>{this.setState({mapInterface:e.map,lastSearchBBox:e.map.getBounds()})},this.onLocationHoverStart=e=>{"DESKTOP"===this.props.viewportCategory&&this.setState((()=>({hoveredMarker:e})))},this.onLocationHoverEnd=e=>{this.setState((t=>t.hoveredMarker&&t.hoveredMarker.id===e.id?{hoveredMarker:null}:null))},this.onPinSelected=e=>{if(e){var t=this.props.detailLocation===e?"primary_pin":"selected_marker";this.state.visitedLocations[e.id]=!0,this.setState({selectedMarker:e,hoveredMarker:null,carouselState:t})}else this.setState({selectedMarker:null,hoveredMarker:null,carouselState:"hidden"})},this.onMapClick=()=>{this.setState({selectedMarker:null,hoveredMarker:null,carouselState:"hidden"})},this.onRedoSearch=()=>{var{mapInterface:e}=this.state;if(e){var t=e.getBounds();this.setState({lastSearchBBox:t})}},this.toggleAlsoShowOption=(e,t)=>{var a={...this.state.selectedAlsoShowOptions};a[e]=!0,this.setState({selectedAlsoShowOptions:a}),t&&this.onRedoSearch()},this.clearAlsoShowOptions=()=>{var{carouselState:e}=this.state;"selected_marker"===e&&(e="hidden"),this.setState({selectedAlsoShowOptions:{},carouselState:e})},this.state={mapInterface:null,hoveredMarker:null,selectedMarker:"MOBILE"===e.viewportCategory?e.detailLocation:null,carouselState:"MOBILE"===e.viewportCategory?"selected_marker":"hidden",hasFitResults:!1,selectedAlsoShowOptions:{[l.hotels]:!1,[l.restaurants]:!0,[l.thingsToDo]:!1},visitedLocations:{},lastSearchBBox:null}}componentDidUpdate(){if(!this.state.hasFitResults){var{mapInterface:e}=this.state;e&&this.setState({hasFitResults:!0})}}render(){var{detailLocation:e,onClose:t}=this.props,{selectedMarker:s,hoveredMarker:o,selectedAlsoShowOptions:n,visitedLocations:M,hasFitResults:g}=this.state,k=o?o.id:0,L=s?s.id:0,f="DESKTOP"===this.props.viewportCategory,C="MOBILE"===this.props.viewportCategory,H=Object.keys(n).filter((e=>n[e])).length>0,P=null;"hidden"!==this.state.carouselState&&s&&(P=[s]);var O=C&&P&&P.length;return a.createElement("div",{className:"ePQUH w e"},a.createElement(I,{locationName:e.name,onClose:t}),a.createElement(r,{initialCenter:new i(e.geoPoint.latitude,e.geoPoint.longitude),initialZoom:15,onLoad:this.onMapLoaded,onClick:this.onMapClick},a.createElement(m,{blacklist:{[e.id]:!0},showSelectedMarker:C,selectedMarker:L,hoveredMarker:k,boundingBox:this.state.lastSearchBBox,isVisited:M,showRestaurants:n[l.restaurants],showAttractions:n[l.thingsToDo],showHotels:n[l.hotels],onMarkerMouseEnter:this.onLocationHoverStart,onMarkerMouseLeave:this.onLocationHoverEnd,onMarkerClick:this.onPinSelected}),a.createElement("div",{className:`ceUhJ ${O?R:""}`},a.createElement(v,null)),a.createElement(E,{locations:[e],hoveredMarker:k,selectedMarker:L,visited:{},showSelectedMarker:C,onMouseEnter:this.onLocationHoverStart,onMouseLeave:this.onLocationHoverEnd,onClick:this.onPinSelected}),a.createElement("div",{className:"bCHhp w"}),f&&!!o&&o!==s&&a.createElement(w,{location:o}),!C&&s&&a.createElement(S,{location:s,autoPan:!0}),O&&a.createElement(p,{locations:P||[],selectedMarker:L,onSwipe:()=>{}}),a.createElement("div",{className:"bYMul"},a.createElement(c,null)),H&&g&&a.createElement("div",{className:"dALVP"},C?a.createElement(d,{onRedoSearch:this.onRedoSearch}):a.createElement(u,{onRedoSearch:this.onRedoSearch})),a.createElement("div",{className:`eEJzx ${O?R:""}`},a.createElement(h,{options:[l.hotels,l.restaurants,l.thingsToDo],selectedValues:this.state.selectedAlsoShowOptions,onValueChange:this.toggleAlsoShowOption,onClearOptions:this.clearAlsoShowOptions}))))}},H=s(((e,t)=>({...t,viewportCategory:e.meta.device.viewportCategory})))(k),P=H,L=class extends a.PureComponent{render(){var e=`/data/1.0/mapsEnrichment/restaurant/${this.props.locationId}`;return a.createElement(g,{url:e},(({loading:e,data:t,error:s})=>a.createElement(a.Fragment,null,this.props.children({loading:e,location:t,error:s}))))}},O=L,f=class extends a.PureComponent{render(){return a.createElement(a.Fragment,null,a.createElement(O,{locationId:this.props.locationId},(({location:e})=>e?a.createElement("div",{style:{width:"100%",height:"100%"}},a.createElement(P,{detailLocation:e,onClose:this.props.onClose})):null)))}},A=f,C=class extends a.PureComponent{constructor(...e){super(...e),this.state={showMap:!1},this.hasPushedHash=!1,this.mapRadio=o("restaurant-detail-map"),this.openMap=()=>{history.pushState(null,document.title,"#MAPVIEW"),this.hasPushedHash=!0,this.checkHash()},this.checkHash=()=>{var e=x();this.setState({showMap:e})},this.closeMap=()=>{this.hasPushedHash?(window.history.back(),this.checkHash()):((()=>{var e=window.location.toString();if(e.indexOf("#")>0){var t=e.substring(0,e.indexOf("#"));window.history.replaceState(null,document.title,t)}})(),this.checkHash())}}componentDidMount(){this.mapRadio.on("open-trigger-clicked",this.openMap),this.mapRadio.on("close-trigger-clicked",this.closeMap),this.setState({showMap:x()}),window.addEventListener("popstate",this.checkHash),window.addEventListener("hashchange",this.checkHash,!1)}componentWillUnmount(){window.removeEventListener("popstate",this.checkHash),window.removeEventListener("hashchange",this.checkHash),this.mapRadio.off("open-trigger-clicked",this.openMap)}render(){return a.createElement(a.Fragment,null,this.state.showMap&&a.createElement(n,{onClose:this.closeMap},a.createElement(A,{onClose:this.closeMap,locationId:this.props.locationId,geoId:this.props.geoId})))}},B=s((e=>({locationId:e.page.detailId,geoId:e.page.geoId})))(C),e("default",B)},[e=>a=e,e=>s=e.connect,e=>o=e.createRadio,e=>n=e.default,e=>i=e.LatLng,e=>r=e.default,e=>(l=e.AlsoShowValues,h=e.AlsoShowControl),e=>c=e.default,e=>d=e.default,e=>p=e.default,e=>u=e.RedoSearchButton,e=>m=e.default,e=>v=e.default,e=>S=e.default,e=>w=e.default,e=>E=e.AnchorMarkers,e=>M=e.Icon,e=>g=e.default]]},["cDcdfi","h74DsO","l6BSGt","A7p4Ig","VwUieX","UaLTva","R57Q-B","KB4cfU","ue1PHu","l7q5Ts","R4dv1u","7XASeK","wbt5GG","IdKzX3","uWGJsK","Xolfce","_qQcW3","w_dosq"]]);
