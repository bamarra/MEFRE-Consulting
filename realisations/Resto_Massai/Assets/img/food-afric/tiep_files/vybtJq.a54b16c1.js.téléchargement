(this.$WP=this.$WP||[]).push(["vybtJq",(e,p)=>{"use strict";var r,i,s,u,t,o,n="REGISTER_POPUP",T="DISMISS_POPUP",a=(e,p)=>{switch(p){case 0:return a(e,100);case 100:return e.popupMaxTier>100||e.popupSkipTiers&&e.popupSkipTiers.get(100)?a(e,200):100;case 200:return e.popupSkipTiers&&e.popupSkipTiers.get(200)?a(e,300):200;case 300:return e.popupSkipTiers&&e.popupSkipTiers.get(300)?a(e,400):300;case 400:return e.popupSkipTiers&&e.popupSkipTiers.get(400)?a(e,500):400;case 500:return 500;default:return 0}},l=(e,p,r,i)=>{var s=e.popupNodes,u=e.popupTier,t=e.popupTierEvents,o=e.popupSkipTiers,n=e.popupTierDismissals,T=p.tier;i&&(o=e.popupSkipTiers.set(T,!0)),e.popupNodes.some((e=>e.key===p.key))||(s=[...e.popupNodes,p],u=a({...e,popupSkipTiers:o},0),t=[]);var l=n.get(T),c=r.filter((e=>!(null!=l&&l.includes(e))));return c.length>0&&(l&&l.length>0&&c.length>0?n.set(T,[...l,...c]):n.set(T,r)),{...e,popupNodes:s,popupTierDismissals:n,popupTierEvents:t,popupTier:u,popupSkipTiers:o}},c=(e,p)=>{var r=e.popupTierEvents;if(p.forEach((p=>{var i;!r.includes(p)&&null!=(i=e.popupNodes)&&i.some((r=>r.key===p&&r.tier===e.popupTier))&&(r=[...r,p])})),r.toString()!==e.popupTierEvents.toString()){var i,s,u={popupTierEvents:e.popupTierEvents,popupTier:e.popupTier};(null!=(i=e.popupSkipTiers)&&i.get(e.popupTier||0)||e.popupTierDismissals&&e.popupNodes.length>0&&void 0!==e.popupTier&&(r&&(null==(s=r)?void 0:s.length)>0||0===e.popupTier))&&(u=(e=>{var p,r=p=>({...e,popupTier:p,popupTierEvents:[]});if(Array.from(e.popupTierEvents||[]).sort().toString()===Array.from((null==(p=e.popupTierDismissals)?void 0:p.get(e.popupTier||0))||[]).sort().toString())switch(e.popupTier){case 0:return r(a(e,100));case 100:return r(a(e,200));case 200:return r(a(e,300));case 300:return r(a(e,400));case 400:return r(a(e,500));default:return e}return e})({...e,popupTierEvents:r}));var t=e.popupMaxTier;return e.popupMaxTier<u.popupTier&&(t=u.popupTier),{...e,popupTierEvents:u.popupTierEvents,popupMaxTier:t,popupTier:u.popupTier}}return e},d=(e=(()=>({popupNodes:[],popupTierDismissals:new Map,popupTierEvents:[],popupTier:0,popupMaxTier:0,popupSkipTiers:new Map}))(),p)=>{switch(p.type){case n:return void 0!==p.element?l(e,p.element,p.dismissEvents,p.skip):(console.error("Missing element for action in the popup reducer."),e);case T:return c(e,p.dismissEvents);default:return e}},v=({children:e})=>e,m=({children:e})=>{var[p,a]=i(d,{popupNodes:[],popupTierDismissals:new Map,popupTierEvents:[],popupTier:0,popupMaxTier:0,popupSkipTiers:new Map}),l=s(((e,p,r)=>{a({type:n,element:e,dismissEvents:p,skip:r})}),[a]),c=s((e=>{a({type:T,dismissEvents:e})}),[a]),v=r.useMemo((()=>({registerPopupTier:l,dismissEvents:c})),[l,c]);return r.createElement(t.Provider,{value:v},r.createElement(o,null,e),p.popupNodes.filter((e=>e.tier===p.popupTier)).map((({node:e,key:p})=>r.createElement(o,{key:p},r.createElement(u,null,e)))))},E=e=>{var{registerPopupTier:p,dismissEvents:i}=r.useContext(t),{factory:s,key:u,eventTypes:o,tier:n,skip:T}=e,a=r.useRef(null),l=r.useCallback((()=>{i(o)}),[i,o]),c=r.useMemo((()=>({dismiss:l})),[l]);return r.useEffect((()=>{a.current=s(c),p({node:a.current,key:u,tier:n},o,T)}),[o,s,u,p,c,n,T]),{dismiss:l}};return[()=>{t=r.createContext({registerPopupTier:()=>{},dismissEvents:()=>{}}),o=r.memo(v),e({DISMISS_POPUP:T,PopupHierarchyLithiumProvider:m,REGISTER_POPUP:n,dismiss:c,register:l,usePopupHierarchyRender:E})},[e=>(r=e,i=e.useReducer,s=e.useCallback),e=>u=e.ErrorBoundary]]},["cDcdfi","nIW_Rw"]]);
